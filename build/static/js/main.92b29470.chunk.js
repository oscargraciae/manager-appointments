(this.webpackJsonpmanager=this.webpackJsonpmanager||[]).push([[0],{356:function(e,t,n){},459:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n(1),a=n.n(r),s=n(33),i=n.n(s),o=n(503),l=n(463),u=n(18),j=n(105),b=n(37),d=n(32),O=n(169),p=n(6),h=n.n(p),x=n(9),f=n(3),m=n(506),g=n(481),v=n(485),y=n(477),w=n(478),S=n(277),C=n(193),k=n(261),F=n.n(k),z=n(135),W=n(262),I=n.n(W),D=n(14),A=n(25),T=n(28),E=n(263),L=n.n(E),_=function e(t){var n=this;Object(D.a)(this,e),this.instance=void 0,this._initializeResponseInterceptor=function(){n.instance.interceptors.response.use(n._handleResponse,n._handleError)},this._handleResponse=function(e){return e.data},this._handleError=function(e){return Promise.reject(e)},this.instance=L.a.create({baseURL:t,withCredentials:!0}),this._initializeResponseInterceptor()},N="https://api.reserly.mx",M="".concat(N,"/api/manager_v1"),R="Reserly",P=function(e){Object(A.a)(n,e);var t=Object(T.a)(n);function n(){var e;return Object(D.a)(this,n),(e=t.call(this,M)).login=function(t){return e.instance.post("/users/auth",t)},e.signup=function(t){return e.instance.post("/users",t)},e.logout=function(){return e.instance.get("/users/auth/logout")},e.getMe=function(){return e.instance.get("/users")},e}return n}(_),B=n(479),q=n(480),H=n(505),G=n(483),V=n.p+"static/media/logo-reserly-2.fdfaa62e.png",U=function(e){var t=e.user,n=e.business,r=e.logout,a=e.onOpen;return t?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(y.a,{h:"66px",bg:"surface",align:"center",justify:"center",borderBottomColor:"borders",borderBottomWidth:1,py:4,px:8,display:{base:"none",md:"flex"},children:[Object(c.jsx)(y.a,{align:"center",w:"190px",children:Object(c.jsx)(q.a,{href:"/",children:Object(c.jsx)("img",{src:V,alt:"uorder",width:"120",height:"40"})})}),Object(c.jsx)(w.a,{fontWeight:"semibold",color:"subtext",children:n.name}),Object(c.jsx)(w.a,{fontWeight:"bold",fontSize:"xs",ml:4,color:n.isPublic?"primary":"yellow.300",children:n.isPublic?"Publicado":"No publicado"}),Object(c.jsx)(B.a,{}),Object(c.jsxs)(H.a,{children:[Object(c.jsx)(H.b,{as:q.a,mx:3,variant:"primary",children:"Mi Cuenta"}),Object(c.jsx)(H.d,{zIndex:3,borderColor:"#DDD",children:Object(c.jsx)(H.c,{onClick:r,children:"Cerrar sesi\xf3n"})})]})]}),Object(c.jsxs)(y.a,{h:"66px",bg:"surface",align:"center",justify:"center",borderBottomColor:"borders",borderBottomWidth:1,py:4,px:{base:4,md:8},display:{base:"flex",md:"none"},children:[Object(c.jsx)(G.a,{onClick:a,"aria-label":"Menu",icon:Object(c.jsx)(z.b,{})}),Object(c.jsx)(y.a,{align:"center",w:"90%",justifyContent:"center",pr:"20px",children:Object(c.jsx)(q.a,{href:"/",children:Object(c.jsx)("img",{src:V,alt:"uorder",width:"120",height:"40"})})})]})]}):Object(c.jsxs)(y.a,{bg:"surface",align:"center",justify:"center",shadow:"md",borderBottomColor:"#DDD",borderWidth:1,py:4,children:[Object(c.jsx)(w.a,{children:R}),Object(c.jsx)(B.a,{}),Object(c.jsx)(w.a,{children:"Iniciar sesion"})]})},Y=n(59),$=function(e){var t=e.title,n=e.icon,r=e.href;return Object(c.jsx)(y.a,{direction:"row",children:Object(c.jsx)(q.a,{as:d.b,to:r,w:"100%",_hover:{bg:"primary",color:"#FFFFFF"},fontWeight:"bold",children:Object(c.jsxs)(y.a,{direction:"row",align:"center",p:3,children:[n()," ",Object(c.jsx)(w.a,{fontSize:"sm",ml:5,children:t})]})})})},Z=function(e){e.logout;return Object(c.jsx)(v.a,{w:"210px",h:"100vh",bg:"surface",shadow:"sm",borderRightWidth:1,borderRightColor:"borders",pos:"sticky",top:"0",left:"0",display:{base:"none",md:"block"},children:Object(c.jsxs)(v.a,{mt:3,children:[Object(c.jsx)($,{title:"Calendario",icon:Y.b,href:"/"}),Object(c.jsx)($,{title:"Reservaciones",icon:Y.a,href:"/bookings"}),Object(c.jsx)($,{title:"Servicios",icon:Y.c,href:"/services"}),Object(c.jsx)($,{title:"Clientes",icon:Y.f,href:"/customers"}),Object(c.jsx)($,{title:"Configuraci\xf3n",icon:Y.e,href:"/settings"})]})})},J=n(508),X=n(40),Q=function(e){var t=e.title,n=e.icon,r=e.href;return Object(c.jsx)(y.a,{direction:"row",py:2,children:Object(c.jsx)(q.a,{as:d.b,to:r,w:"100%",_hover:{bg:"primary",color:"#FFFFFF"},fontWeight:"bold",children:Object(c.jsxs)(y.a,{direction:"row",align:"center",p:3,children:[n()," ",Object(c.jsx)(w.a,{fontSize:"sm",ml:5,children:t})]})})})},K=function(e){var t=e.isOpen,n=e.onClose,r=e.logout,s=a.a.useRef();return Object(c.jsx)(J.a,{isOpen:t,placement:"left",onClose:n,finalFocusRef:s,children:Object(c.jsx)(X.h,{children:Object(c.jsxs)(J.b,{children:[Object(c.jsx)(X.c,{}),Object(c.jsx)(X.b,{children:Object(c.jsxs)(v.a,{mt:3,children:[Object(c.jsx)(Q,{title:"Calendario",icon:Y.b,href:"/"}),Object(c.jsx)(Q,{title:"Reservaciones",icon:Y.a,href:"/bookings"}),Object(c.jsx)(Q,{title:"Servicios",icon:Y.c,href:"/services"}),Object(c.jsx)(Q,{title:"Configuraci\xf3n",icon:Y.e,href:"/settings"}),Object(c.jsx)(y.a,{direction:"row",py:2,children:Object(c.jsx)(S.a,{onClick:r,w:"100%",_hover:{bg:"primary",color:"#FFFFFF"},fontWeight:"bold",children:Object(c.jsx)(y.a,{direction:"row",align:"center",p:3,children:Object(c.jsx)(w.a,{fontSize:"sm",ml:5,children:"Cerrar sesi\xf3n"})})})})]})})]})})})},ee=n(484),te=function(){return Object(c.jsxs)(y.a,{direction:"column",justify:"center",align:"center",flex:1,w:"100%",height:"100vh",children:[Object(c.jsx)(ee.a,{size:"xl",color:"primary"}),Object(c.jsxs)(w.a,{mt:4,fontWeight:"bold",fontSize:"2xl",children:["Cargando ",R]})]})},ne=n(269),ce=n(47),re=n.n(ce);re.a.locale("es-mx");var ae=function(e,t){return t?re()(e).format(t):re()(e).tz("America/Monterrey").format("DD/MM/YYYY HH:mm")},se=function(e){return re()(e).tz("America/Monterrey").format("dddd DD [de] MMMM [de] YYYY HH:mm")},ie=a.a.createContext(null),oe=function(e){var t=e.children,n=Object(m.a)(),a=function(){var e=Object(ne.io)(N,{transports:["websocket"]}),t=Object(r.useState)(!1),n=Object(f.a)(t,2),c=n[0];return n[1],{socket:e,online:c}}(),s=a.socket,i=a.online;return s.on("new-booking",(function(e){console.log("Socket data",e),n({title:"Nueva reservaci\xf3n",description:"".concat(ae(e.bookingDate)),status:"success",position:"top"})})),Object(c.jsx)(ie.Provider,{value:{socket:s,online:i},children:t})},le=function(e){return e.replace(/ /g,"-").toLocaleLowerCase()},ue=n(510),je=n(488),be=n.p+"static/media/reserly-logo.d5cba136.png",de=function(){return Object(c.jsx)(y.a,{bg:"secondary",py:10,px:4,mt:24,children:Object(c.jsxs)(y.a,{direction:"column",w:"1180px",mx:"auto",children:[Object(c.jsxs)(v.a,{children:[Object(c.jsx)(q.a,{href:"/",children:Object(c.jsx)("img",{src:be,alt:"uorder",width:"120",height:"90"})}),Object(c.jsxs)(ue.a,{spacing:5,py:4,children:[Object(c.jsx)(q.a,{target:"_blank",fontWeight:"500",color:"#FFFFFF",fontSize:"sm",href:"".concat("https://reserly.mx","/terminos-y-condiciones"),children:"Terminos y condiciones"}),Object(c.jsx)(q.a,{target:"_blank",fontWeight:"500",color:"#FFFFFF",fontSize:"sm",href:"".concat("https://reserly.mx","/aviso-de-privacidad"),children:"Politica de privacidad"}),Object(c.jsx)(w.a,{fontWeight:"500",color:"#FFFFFF",fontSize:"sm",children:"Contacto: hola@reserly.mx"})]})]}),Object(c.jsx)(v.a,{children:Object(c.jsx)(q.a,{target:"_blank",fontWeight:"500",color:"#FFFFFF",fontSize:"sm",href:"https://www.facebook.com/reserlymx",children:"Facebook de Reserly"})}),Object(c.jsx)(je.a,{my:6,borderColor:"#FFFFFF"}),Object(c.jsx)(w.a,{fontWeight:"500",color:"#FFFFFF",fontSize:"sm",children:"\xa9 Reserly. Todos los derechos reservados"})]})})},Oe=a.a.createContext(null),pe=function(e){var t=e.children,n=Object(m.a)(),a=Object(g.a)(),s=a.isOpen,i=a.onOpen,o=a.onClose,l=Object(r.useState)(null),u=Object(f.a)(l,2),j=u[0],d=u[1],O=Object(r.useState)(null),p=Object(f.a)(O,2),k=p[0],W=p[1],D=Object(r.useState)(!0),A=Object(f.a)(D,2),T=A[0],E=A[1],L=Object(b.g)();Object(r.useEffect)((function(){console.log("Cambiando pagina",window.location.pathname),C.a.initialize("G-29KJTGHLGJ"),C.a.pageview(window.location.pathname+window.location.search)}),[L.location]);var _=function(){var e=Object(x.a)(h.a.mark((function e(){var t,n,c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new P).getMe();case 2:if(n=e.sent,c=n.success,r=n.user,c&&r){e.next=8;break}return alert("Usuario no encotrado"),e.abrupt("return");case 8:if(r.businessUser&&(null===(t=r.businessUser.business)||void 0===t?void 0:t.isCompleted)){e.next=12;break}return L.push("/new-business"),e.abrupt("return");case 12:r.businessUser.business&&W(r.businessUser.business),d(r),E(!1);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(x.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new P).logout();case 2:L.push("/login");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){_()}),[]),!T&&k&&k.name?Object(c.jsx)(Oe.Provider,{value:k,children:Object(c.jsx)(oe,{children:Object(c.jsxs)(v.a,{height:"100vh",bg:"background",children:[Object(c.jsx)(U,{user:j,business:k,logout:N,onOpen:i}),Object(c.jsxs)(y.a,{direction:"row",children:[Object(c.jsx)(Z,{logout:N,business:k}),Object(c.jsx)(K,{isOpen:s,onClose:o,logout:N}),Object(c.jsxs)(v.a,{w:"100%",children:[Object(c.jsxs)(y.a,{w:"100%",bg:"surface",px:6,py:2,alignItems:"center",children:[Object(c.jsx)(w.a,{fontSize:"sm",fontWeight:"bold",mr:2,children:"Compartir"}),Object(c.jsx)(w.a,{display:{base:"none",md:"block"},fontSize:"sm",children:"".concat(window.location.origin,"/b/").concat(le(k.name),"/").concat(k.id)}),Object(c.jsx)(S.a,{size:"xs",ml:3,leftIcon:Object(c.jsx)(z.a,{}),onClick:function(e){if(k&&k.name){var t="".concat(window.location.origin,"/b/").concat(le(k.name),"/").concat(k.id);F()(t),n({title:"URL copiada",duration:1e3,position:"top",status:"success"})}},children:"Copiar URL"}),Object(c.jsx)(S.a,{leftIcon:Object(c.jsx)(z.c,{}),size:"xs",ml:3,onClick:function(){var e=document.getElementById("businessqr");if(e&&k&&k.name){var t=e.toDataURL("image/png").replace("image/png","image/octet-stream"),n=document.createElement("a");n.href=t,n.download="".concat(le(k.name),"-qr"),document.body.appendChild(n),n.click(),document.body.removeChild(n)}},children:"Descargar QR"})]}),Object(c.jsxs)(v.a,{children:[Object(c.jsx)(I.a,{value:"".concat(window.location.origin,"/b/").concat(le(k.name),"/").concat(k.id),id:"businessqr",style:{display:"none"}}),t]})]})]}),Object(c.jsx)(de,{})]})})}):Object(c.jsx)(te,{})},he=n(495),xe=n(22),fe=function(e){var t={};return e.email&&/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(t.email="Ingresa una direcci\xf3n de correo electr\xf3nico"),e.password||(t.password="Ingresa una contrase\xf1a"),t},me=function(e){var t=e.children,n=e.variant,r=void 0===n?"regular":n;return Object(c.jsx)(v.a,{mt:8,mx:"auto",maxW:"regular"===r?"800px":"400px",w:"100%",children:t})},ge=n(85),ve=n(489),ye=n(490),we=n(491),Se=n(492),Ce=n(493),ke=n(494),Fe=n(97),ze=function(e){var t=e.label,n=(e.errors,e.inputSize),r=void 0===n?"md":n,a=Object(j.a)(e,["label","errors","inputSize"]),s=Object(xe.c)(a),i=Object(f.a)(s,2),o=i[0],l=i[1],b=l.error,d=l.touched;return Object(c.jsxs)(ge.a,{isInvalid:!(!d||!b),children:[Object(c.jsx)(ve.a,{fontWeight:"bold",fontSize:"sm",htmlFor:o.name,children:t}),Object(c.jsx)(ye.a,Object(u.a)(Object(u.a)(Object(u.a)({size:r},o),a),{},{id:o.name})),d&&b?Object(c.jsx)(we.a,{children:b}):null]})},We=function(e){var t=e.label,n=(e.errors,e.inputSize),r=void 0===n?"md":n,a=Object(j.a)(e,["label","errors","inputSize"]),s=Object(xe.c)(a),i=Object(f.a)(s,2),o=i[0],l=i[1],b=l.error,d=l.touched;return Object(c.jsxs)(ge.a,{isInvalid:!(!d||!b),children:[Object(c.jsx)(ve.a,{fontWeight:"bold",fontSize:"sm",htmlFor:o.name,children:t}),Object(c.jsx)(Se.a,Object(u.a)(Object(u.a)(Object(u.a)({size:r},o),a),{},{id:o.name})),d&&b?Object(c.jsx)(we.a,{children:b}):null]})},Ie=function(e){e.label;var t=Object(j.a)(e,["label"]),n=Object(xe.c)(t),a=Object(f.a)(n,2),s=a[0],i=a[1],o=i.error,l=i.touched,b=Object(r.useState)(!1),d=Object(f.a)(b,2),O=d[0],p=d[1];return Object(c.jsxs)(ge.a,{isInvalid:!(!l||!o),children:[Object(c.jsx)(ve.a,{htmlFor:"description",fontSize:"sm",fontWeight:"bold",children:"Contrase\xf1a"}),Object(c.jsxs)(Ce.a,{children:[Object(c.jsx)(ye.a,Object(u.a)(Object(u.a)(Object(u.a)({type:O?"text":"password"},s),t),{},{id:s.name})),Object(c.jsx)(ke.a,{children:Object(c.jsx)(G.a,{"aria-label":"Search database",variant:"ghost",icon:O?Object(Fe.c)({}):Object(Fe.b)({}),onClick:function(){return p(!O)}})})]}),l&&o?Object(c.jsx)(we.a,{children:o}):null]})},De=n(509),Ae=function(e){var t=e.title,n=e.description;return Object(c.jsxs)(De.a,{status:"error",children:[t&&Object(c.jsx)(De.d,{children:t}),n&&Object(c.jsx)(De.b,{fontSize:"sm",textAlign:"left",children:n})]})},Te=function(){var e=Object(r.useState)(""),t=Object(f.a)(e,2),n=t[0],a=t[1],s=Object(b.g)(),i=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new P,e.next=3,n.login(t);case 3:!(c=e.sent).success&&c.message?a(c.message):s.push("/");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsx)(me,{variant:"small",children:Object(c.jsxs)(v.a,{shadow:"md",my:0,mx:"auto",textAlign:"center",p:10,bg:"surface",children:[Object(c.jsx)(he.a,{as:"h1",children:"Inicia sesi\xf3n"}),Object(c.jsx)(v.a,{mt:6,children:Object(c.jsx)(xe.b,{initialValues:{email:"",password:"",firstName:"",lastName:""},onSubmit:i,validate:fe,children:function(e){var t=e.isSubmitting;e.errors,e.touched;return Object(c.jsx)(xe.a,{children:Object(c.jsxs)(ue.c,{spacing:4,children:[Object(c.jsx)(ze,{name:"email",label:"Correo eletr\xf3nico"}),Object(c.jsx)(Ie,{name:"password",label:"Contrase\xf1a"}),Object(c.jsx)(S.a,{mt:40,isLoading:t,type:"submit",size:"lg",variant:"primary",isFullWidth:!0,children:"Iniciar sesi\xf3n"}),Object(c.jsx)(S.a,{alignSelf:"flex-end",textAlign:"right",size:"sm",variant:"link",children:"\xbfOlvidaste tu contrase\xf1a?"}),n&&Object(c.jsx)(Ae,{description:n}),Object(c.jsx)(je.a,{orientation:"horizontal",my:4}),Object(c.jsxs)(w.a,{mb:2,children:["\xbfNo tienes cuenta?"," ",Object(c.jsx)(d.b,{to:"/signup",children:Object(c.jsx)(q.a,{color:"primary",fontWeight:"bold",children:"Registrate"})})]})]})})}})})]})})},Ee=n(27),Le=function(e){var t=e.title,n=e.children;return Object(c.jsxs)(v.a,{p:6,py:4,w:"100%",maxW:"1920px",children:[t&&Object(c.jsx)(he.a,{as:"h3",size:"lg",children:t}),Object(c.jsx)(v.a,{mt:3,children:n})]})},_e=n(15),Ne=n(192),Me=(n(345),n(346),n(272)),Re=n.n(Me),Pe=function(e){Object(A.a)(n,e);var t=Object(T.a)(n);function n(){var e;return Object(D.a)(this,n),(e=t.call(this,M)).getAll=function(t){return e.instance.get("/bookings?".concat(function(e){return Re.a.stringify(e,{skipNull:!0,skipEmptyString:!0,strict:!0})}(t)))},e.get=function(t){return e.instance.get("/bookings/".concat(t))},e.update=function(t,n){return e.instance.put("/bookings/".concat(t),n)},e.accepted=function(t){return e.instance.put("/bookings/".concat(t,"/accepted"))},e.canceled=function(t){return e.instance.put("/bookings/".concat(t,"/canceled"))},e}return n}(_),Be=n(106),qe=n.n(Be),He=function(e){return e.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{openFrom:qe()(e.openFrom,[qe.a.ISO_8601,"HH:mm"]).format("H:mm"),openTill:qe()(e.openTill,[qe.a.ISO_8601,"HH:mm"]).format("H:mm")})}))},Ge={allDay:"Todo el d\xeda",previous:"<",next:">",today:"Hoy",month:"Mes",week:"Semana",day:"D\xeda",agenda:"Agenda",date:"Fecha",time:"Hora",event:"Evento",noEventsInRange:"No hay eventos en este rango",showMore:function(e){return"+ Ver m\xe1s (".concat(e,")")}},Ve=function(e){var t=e.event.customer;return Object(c.jsx)(v.a,{children:Object(c.jsxs)(w.a,{fontWeight:"semibold",isTruncated:!0,children:[t.firstName," ",t.lastName]})})},Ue=(n(356),function(e){Object(A.a)(n,e);var t=Object(T.a)(n);function n(){var e;return Object(D.a)(this,n),(e=t.call(this,M)).create=function(t){return e.instance.post("/businesses",t)},e.update=function(t,n){return e.instance.put("/businesses/".concat(n),t)},e.get=function(){return e.instance.get("/businesses")},e.createHours=function(t,n){return e.instance.post("/businesses/".concat(n,"/hours"),t)},e.getHours=function(t){return e.instance.get("/businesses/".concat(t,"/hours"))},e.uplaodCover=function(t){return e.instance.post("/businesses/upload/cover",t,{headers:{"content-type":"multipart/form-data"}})},e.uplaodGallery=function(t){return e.instance.post("/businesses/upload/photos",t,{headers:{"content-type":"multipart/form-data"}})},e.deletePhoto=function(t){return e.instance.delete("/businesses/upload/photos/".concat(t))},e.getPhotos=function(){return e.instance.get("/businesses/upload/photos")},e.createService=function(t,n){return e.instance.post("/businesses/".concat(n,"/services"),t)},e.updateService=function(t,n,c){return e.instance.put("/businesses/".concat(c,"/services/").concat(n),t)},e.deleteService=function(t,n){return e.instance.delete("/businesses/".concat(n,"/services/").concat(t))},e.getServices=function(t){return e.instance.get("/businesses/".concat(t,"/services"))},e}return n}(_)),Ye=function(e){return e.sort((function(e,t){if(e.openTill&&t.openTill)return t.openTill.localeCompare(e.openTill)})),e[0].openTill},$e=Object(Ne.b)(re.a),Ze=function(e){Object(Ee.a)(e);var t=Object(b.g)(),n=Object(r.useContext)(Oe),a=Object(r.useState)([]),s=Object(f.a)(a,2),i=s[0],o=s[1],l=Object(r.useState)({min:"00:00",max:"23:30"}),j=Object(f.a)(l,2),d=j[0],O=j[1];Object(r.useEffect)((function(){(function(){var e=Object(x.a)(h.a.mark((function e(){var t,c,r,a,s;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new Ue).getHours(n.id);case 2:(t=e.sent).success&&t.hours&&(c=t.hours,r=Object(_e.a)(t.hours),(i=c).sort((function(e,t){if(e.openFrom&&t.openFrom)return e.openFrom.localeCompare(t.openFrom)})),a=i[0].openFrom,s=Ye(r),a&&s&&O({min:a,max:s}),He(t.hours));case 4:case"end":return e.stop()}var i}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(r.useEffect)((function(){(function(){var e=Object(x.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new Pe).getAll({statuses:[1,2]});case 2:(t=e.sent).success&&(c=t.bookings,n=c.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{title:e.customer?e.customer.firstName:"",start:qe()("".concat(e.bookingDate)).toDate(),end:qe()("".concat(e.bookingDate)).add(e.totalTime,"minute").toDate()})})),o(n));case 4:case"end":return e.stop()}var c}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);return Object(c.jsxs)(v.a,{h:"80vh",children:[Object(c.jsx)(y.a,{pb:2,children:Object(c.jsxs)(y.a,{mb:1,children:[Object(c.jsxs)(ue.a,{mr:3,children:[Object(c.jsx)(v.a,{bg:"primary",w:4,h:4}),Object(c.jsx)(w.a,{fontSize:"sm",children:"Aceptado"})]}),Object(c.jsxs)(ue.a,{children:[Object(c.jsx)(v.a,{bg:"yellow.300",w:4,h:4}),Object(c.jsx)(w.a,{fontSize:"sm",children:"Pendiente"})]})]})}),Object(c.jsx)(Ne.a,{localizer:$e,events:i,startAccessor:"start",endAccessor:"end",timeslots:2,step:15,messages:Ge,eventPropGetter:function(e,t,n,c){return{style:{backgroundColor:2===e.bookingStatusId?"#BDEFD1":"#FEFCBF",borderRadius:0,opacity:1,borderWidth:0,fontSize:"12px",color:2===e.bookingStatusId?"#16793D":"#D69E2E",borderLeftWidth:5,borderLeftColor:2===e.bookingStatusId?"#05AF3C":"#ECC94B",flexDirection:"column",fontWeight:"bold"}}},slotPropGetter:function(){return{style:{}}},slotGroupPropGetter:function(){return{style:{minHeight:"80px"}}},dayPropGetter:function(){return{style:{backgroundColor:"#FFF"}}},components:{event:Ve},defaultView:"day",views:{week:!0,day:!0,agenda:!0},min:re()(d.min,[re.a.ISO_8601,"HH:mm"]).toDate(),max:re()(d.max,[re.a.ISO_8601,"HH:mm"]).toDate(),onSelectEvent:function(e){console.log("Click en el evento",e),e.id&&t.push("/bookings/".concat(e.id))}})]})},Je=function(e){return Object(Ee.a)(e),Object(c.jsx)(Le,{children:Object(c.jsx)(v.a,{children:Object(c.jsx)(Ze,{})})})},Xe=function(e){var t={};return e.email&&/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(t.email="Ingresa una direcci\xf3n de correo electr\xf3nico"),e.password||(t.password="Ingresa una contrase\xf1a"),e.phone||(t.phone="Ingresa una tel\xe9fono."),e.firstName||(t.firstName="Ingresa un nombre"),e.lastName||(t.lastName="Ingresa un apellido"),t},Qe=function(e){Object(Ee.a)(e);var t=Object(b.g)(),n=Object(r.useState)(""),a=Object(f.a)(n,2),s=a[0],i=a[1],o=function(){var e=Object(x.a)(h.a.mark((function e(n){var c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=new P,e.next=3,c.signup(n);case 3:if((r=e.sent).success||!r.message){e.next=7;break}return i(r.message),e.abrupt("return");case 7:t.push("/");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsx)(me,{variant:"small",children:Object(c.jsxs)(v.a,{shadow:"md",my:0,mx:"auto",textAlign:"center",p:10,bg:"surface",children:[Object(c.jsx)(he.a,{as:"h1",children:"Bienvenido"}),Object(c.jsx)(w.a,{mt:2,fontWeight:"bold",children:"Registrate gratis."}),Object(c.jsx)(v.a,{mt:4,children:Object(c.jsx)(xe.b,{initialValues:{email:"",password:"",firstName:"",lastName:"",phone:""},onSubmit:o,validate:Xe,children:function(e){var t=e.isSubmitting;return Object(c.jsx)(xe.a,{children:Object(c.jsxs)(ue.c,{spacing:4,children:[Object(c.jsx)(ze,{name:"firstName",label:"Nombre"}),Object(c.jsx)(ze,{name:"lastName",label:"Apellido"}),Object(c.jsx)(ze,{name:"phone",label:"Tu n\xfamero de tel\xe9fono"}),Object(c.jsx)(ze,{name:"email",label:"Correo eletr\xf3nico"}),Object(c.jsx)(Ie,{name:"password",label:"Contrase\xf1a"}),Object(c.jsx)(S.a,{isLoading:t,type:"submit",size:"lg",variant:"primary",isFullWidth:!0,children:"Registrate"}),s&&Object(c.jsx)(Ae,{description:s}),Object(c.jsxs)(w.a,{as:"em",fontSize:"sm",children:["Al registrarte, confirmas que aceptas los ",Object(c.jsx)(q.a,{href:"#",color:"teal.500",children:"T\xe9rminos y condiciones"})," y la ",Object(c.jsx)(q.a,{href:"#",color:"teal.500",children:"Pol\xedtica de privacidad"}),"."]}),Object(c.jsx)(je.a,{orientation:"horizontal",my:4}),Object(c.jsxs)(w.a,{mb:2,children:["\xbfYa tienes tu cuenta?"," ",Object(c.jsx)(q.a,{as:d.b,to:"/login",color:"primary",fontWeight:"bold",children:"Iniciar sesion"})]})]})})}})})]})})},Ke=n(496),et=function(e){var t=e.title,n=e.href;return Object(c.jsx)(q.a,{as:d.b,to:n,fontWeight:"bold",pr:4,children:Object(c.jsx)(y.a,{direction:"row",children:Object(c.jsx)(w.a,{fontSize:"md",children:t})})})},tt=function(e){var t=e.children;return Object(c.jsxs)(v.a,{children:[Object(c.jsxs)(ue.a,{mt:4,borderBottomWidth:1,borderColor:"borders",py:3,overflow:"auto",children:[Object(c.jsx)(et,{title:"Datos b\xe1sicos",href:"/settings"}),Object(c.jsx)(et,{title:"Ubicaci\xf3n",href:"/settings/location"}),Object(c.jsx)(et,{title:"Horario",href:"/settings/hours"}),Object(c.jsx)(et,{title:"Fotos",href:"/settings/photos"}),Object(c.jsx)(et,{title:"Generales",href:"/settings/advanced"})]}),Object(c.jsx)(v.a,{my:4,bg:"surface",borderColor:"borders",borderWidth:1,p:6,borderRadius:3,children:t})]})},nt=function(e){var t={};return e.name||(t.name="Ingresa el nombre de tu negocio"),0===Number(e.businessCategoryId)&&(t.businessCategoryId="Ingresa una categor\xeda"),t},ct=function(){return Object(c.jsx)(y.a,{direction:"column",justify:"center",align:"center",flex:1,w:"100%",height:"100vh",children:Object(c.jsx)(ee.a,{size:"md",color:"primary"})})},rt=function(){var e=Object(r.useState)(null),t=Object(f.a)(e,2),n=t[0],a=t[1],s=Object(m.a)();Object(r.useEffect)((function(){(function(){var e=Object(x.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new Ue).get();case 2:t=e.sent,n=t.business,a(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var i=function(){var e=Object(x.a)(h.a.mark((function e(t){var c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!n.id){e.next=6;break}return e.next=3,(new Ue).update(t,n.id);case 3:(c=e.sent).success&&s({title:"Datos actualizados.",status:"success",isClosable:!0,position:"top"}),console.log("respuesta",c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(!n)return Object(c.jsx)(ct,{});var o={name:n.name?n.name:"",description:n.description?n.description:"",businessCategoryId:n.businessCategoryId?n.businessCategoryId:0,phone:n.phone?n.phone:""};return Object(c.jsx)(Le,{title:"Configuraci\xf3n",children:Object(c.jsx)(tt,{children:Object(c.jsxs)(v.a,{w:{base:"100%",md:"70%"},children:[Object(c.jsx)(he.a,{as:"h2",size:"md",mb:8,children:"Datos b\xe1sicos"}),Object(c.jsx)(xe.b,{initialValues:o,onSubmit:i,validate:nt,children:function(e){var t=e.isSubmitting,n=e.values,r=e.handleChange,a=e.errors;return Object(c.jsx)(xe.a,{children:Object(c.jsxs)(ue.c,{spacing:8,align:"flex-start",children:[Object(c.jsx)(ze,{inputSize:"lg",name:"name",label:"Nombre del negocio"}),Object(c.jsx)(We,{inputSize:"lg",name:"description",label:"Descripci\xf3n del negocio (opcional)",rows:4}),Object(c.jsxs)(ge.a,{isInvalid:!!a.businessCategoryId,children:[Object(c.jsx)(ve.a,{fontWeight:"bold",fontSize:"sm",children:"Categor\xeda"}),Object(c.jsx)(Ke.a,{name:"businessCategoryId",size:"lg",value:n.businessCategoryId,onChange:r,children:Object(c.jsx)("option",{value:"0",children:"Selecciona una categor\xeda"})}),a.businessCategoryId&&Object(c.jsx)(we.a,{children:a.businessCategoryId})]}),Object(c.jsx)(ze,{inputSize:"lg",name:"phone",label:"Tel\xe9fono de contacto"}),Object(c.jsx)(S.a,{variant:"primary",size:"lg",type:"submit",isLoading:t,children:"Guardar"})]})})}})]})})})},at=n(513),st=n(511),it=function(e){var t=e.onUpload,n=Object(m.a)(),a=Object(r.useState)(""),s=Object(f.a)(a,2),i=s[0],o=s[1],l=Object(r.useState)(!1),u=Object(f.a)(l,2),j=u[0],b=u[1],d=function(){var e=Object(x.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new Ue).get();case 2:t=e.sent,o(t.business.cover);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){d()}),[]);var O=function(){var e=Object(x.a)(h.a.mark((function e(c){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),(r=new FormData).append("file",c.target.files[0]),e.next=5,(new Ue).uplaodCover(r);case 5:d(),n({title:"Datos actualizados.",status:"success",isClosable:!0,position:"top"}),b(!1),t&&t();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(v.a,{w:{base:"100%",md:"60%"},pr:10,children:[Object(c.jsx)(w.a,{fontWeight:"bold",mb:4,children:"Foto de portada"}),Object(c.jsx)(w.a,{fontSize:"sm",color:"subtext",mb:3,children:"Tu foto de portada es la primera impresi\xf3n que tienen tus clientes de tu negocio."}),Object(c.jsx)(w.a,{fontSize:"sm",color:"subtext",children:"Directrices importantes: Tama\xf1o recomendado 780 x 520 p\xedxeles; formato .jpg, .jpeg, o .png."}),Object(c.jsx)(S.a,{variant:"primary-outline",isLoading:j,p:0,mt:4,children:Object(c.jsx)(ve.a,{w:"100%",h:"100%",htmlFor:"file",m:0,p:2,px:4,children:"Cambiar foto"})}),Object(c.jsx)("input",{type:"file",id:"file",name:"file",accept:"image/x-png, image/png, image/jpg, image/jpeg",multiple:!1,onChange:O,style:{display:"none"}})]}),Object(c.jsx)(y.a,{mt:3,w:{base:"100%",md:"40%"},justify:"center",alignItems:"center",children:Object(c.jsx)(st.a,{src:i,w:"300px",h:"200px",objectFit:"cover",loading:"eager"})})]})},ot=function(e){Object(Ee.a)(e);var t=Object(b.g)();return Object(c.jsxs)(v.a,{textAlign:"center",children:[Object(c.jsx)(he.a,{as:"h2",children:"Foto de portada"}),Object(c.jsx)(w.a,{fontSize:"xl",fontWeight:"500",children:"Esta es la primera imagen que ver\xe1n las personas, puede ser el logotipo de tu negocio, imagen de tu local o una imagen de un servicio."}),Object(c.jsx)(y.a,{flexDirection:{base:"column",md:"row"},w:"100%",justify:"space-between",mt:10,children:Object(c.jsx)(it,{onUpload:function(){}})}),Object(c.jsx)(v.a,{textAlign:"right",mr:4,children:Object(c.jsx)(S.a,{size:"lg",mt:10,variant:"primary",onClick:function(){return t.push("/new-business/6")},children:"Siguiente"})})]})},lt=n(512),ut=n(126),jt=function(){var e=Object(b.g)(),t=Object(r.useState)(null),n=Object(f.a)(t,2),a=n[0],s=n[1],i=Object(r.useState)([]),o=Object(f.a)(i,2),l=o[0],u=o[1],j=function(){var e=Object(x.a)(h.a.mark((function e(){var t,n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new Ue).get();case 2:t=e.sent,n=t.success,c=t.business,n&&s(c);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){j(),d()}),[]);var d=function(){var e,t,n=[];for(e=0;e<24;e++)for(t=0;t<2;t++)n.push(e+":"+(0===t?"00":30*t));u(n)},O=function(){var t=Object(x.a)(h.a.mark((function t(n){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!a){t.next=5;break}return t.next=3,(new Ue).createHours(n,a.id);case 3:t.sent.success&&e.push("/new-business/5");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(e,t,n,r,a){var s=e.days[a].isOpen,i=e.days[a],o=i.openFrom,u=i.openTill;return Object(c.jsxs)(ue.a,{w:"100%",direction:"row",justify:"center",align:"center",children:[Object(c.jsx)(w.a,{w:"250px",textAlign:"left",fontWeight:"semibold",children:r}),Object(c.jsx)(ge.a,{children:Object(c.jsx)(Ke.a,{name:"days[".concat(a,"].openFrom"),size:"lg",value:o,onChange:t,isDisabled:!s,children:l.map((function(e,t){return Object(c.jsx)("option",{value:e,children:e},t)}))})}),Object(c.jsx)(ge.a,{children:Object(c.jsx)(Ke.a,{name:"days[".concat(a,"].openTill"),size:"lg",value:u,onChange:t,isDisabled:!s,children:l.map((function(e,t){return Object(c.jsx)("option",{value:e,children:e},t)}))})}),Object(c.jsx)(lt.a,{label:s?"Cerrar este d\xeda":"Abrir este d\xeda",fontSize:"md",children:Object(c.jsx)(G.a,{colorScheme:s?"blue":"red","aria-label":"Call Segun",size:"lg",icon:s?Object(c.jsx)(ut.b,{}):Object(c.jsx)(ut.a,{}),onClick:function(){return n("days[".concat(a,"].isOpen"),!s)}})})]})};if(!a)return Object(c.jsx)(te,{});var m={days:[{businessId:a.id,openFrom:"9:00",openTill:"20:00",isOpen:!0,dayOfWeek:0},{businessId:a.id,openFrom:"9:00",openTill:"20:00",isOpen:!0,dayOfWeek:1},{businessId:a.id,openFrom:"9:00",openTill:"20:00",isOpen:!0,dayOfWeek:2},{businessId:a.id,openFrom:"9:00",openTill:"20:00",isOpen:!0,dayOfWeek:3},{businessId:a.id,openFrom:"9:00",openTill:"20:00",isOpen:!0,dayOfWeek:4},{businessId:a.id,openFrom:"9:00",openTill:"20:00",isOpen:!0,dayOfWeek:5},{businessId:a.id,openFrom:"9:00",openTill:"20:00",isOpen:!0,dayOfWeek:6}]};return Object(c.jsxs)(v.a,{textAlign:"center",children:[Object(c.jsx)(he.a,{as:"h2",children:"\xbfCu\xe1l es el horario de tu negocio?"}),Object(c.jsx)(w.a,{fontSize:"xl",fontWeight:"500",children:"Ingresa el horario de tu negocio ya que ser\xe1 la hora disponible para hacer reservaciones."}),Object(c.jsx)(xe.b,{initialValues:m,onSubmit:O,children:function(e){var t=e.isSubmitting,n=e.values,r=e.handleChange,a=e.setFieldValue;return Object(c.jsx)(xe.a,{children:Object(c.jsx)(y.a,{align:"center",w:"100%",justify:"center",mt:10,children:Object(c.jsxs)(ue.c,{w:{base:"100%",md:"80%"},spacing:3,children:[p(n,r,a,"Lunes",0),p(n,r,a,"Martes",1),p(n,r,a,"Mi\xe9rcoles",2),p(n,r,a,"Jueves",3),p(n,r,a,"Viernes",4),p(n,r,a,"S\xe1bado",5),p(n,r,a,"Domingo",6),Object(c.jsx)(S.a,{size:"lg",alignSelf:"flex-end",variant:"primary",type:"submit",isLoading:t,children:"Siguiente"})]})})})}})]})},bt=n(100),dt=n.n(bt),Ot=function(e){Object(A.a)(n,e);var t=Object(T.a)(n);function n(){var e;return Object(D.a)(this,n),(e=t.call(this,M)).get=function(t){return e.instance.get("/businesses/".concat(t,"/addresses"))},e.create=function(t,n){return e.instance.post("/businesses/".concat(n,"/addresses"),t)},e.update=function(t,n,c){return e.instance.put("/businesses/".concat(n,"/addresses/").concat(c),t)},e}return n}(_),pt=function(e){var t=e.coords,n=e.setCoords,c=Object(r.useRef)(),a=Object(r.useRef)(),s=Object(r.useRef)();Object(r.useEffect)((function(){var e={lat:t.lat,lng:t.lng},r=new google.maps.Map(c.current,{center:e,zoom:17,scrollwheel:!1,streetViewControl:!1,fullscreenControl:!1,mapTypeControl:!1,zoomControl:!0,disableDoubleClickZoom:!0,zoomControlOptions:{position:google.maps.ControlPosition.TOP_LEFT}});a.current=r,r.addListener("dragend",(function(){var e=r.getCenter(),t=e.lat,c=e.lng;console.log("DRAGGEG",t,c),n({lat:t(),lng:c()})}))}),[]);return{refContainer:c,addMarker:function(e){var t=e.lat,c=e.lng;if(a.current){var r=new google.maps.Marker({position:{lat:t,lng:c},map:a.current,draggable:!0});s.current=r,r&&r.addListener("dragend",(function(e){n({lat:e.latLng.lat(),lng:e.latLng.lng()})}))}},changeLocation:function(e){a.current&&a.current.setCenter(e)}}},ht=function(e){var t=e.handleSaveAddress,n=e.business,a=Object(r.useState)(null),s=Object(f.a)(a,2),i=s[0],o=s[1],l=Object(r.useState)(""),j=Object(f.a)(l,2),b=j[0],d=j[1],O=Object(r.useState)({lat:25.6866142,lng:-100.3161126}),p=Object(f.a)(O,2),m=p[0],g=p[1],C=Object(r.useState)(""),k=Object(f.a)(C,2),F=k[0],z=k[1],W=Object(r.useState)(""),I=Object(f.a)(W,2),D=I[0],A=I[1],T=pt({coords:m,setCoords:g}),E=T.refContainer,L=T.addMarker,_=T.changeLocation,N=function(){var e=Object(x.a)(h.a.mark((function e(){var t,c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new Ot).get(n.id);case 2:t=e.sent,c=t.success,r=t.address,c&&r&&(o(r),d(r.addressMap),g({lat:r.lat,lng:r.lng}),_({lat:r.lat,lng:r.lng}),L({lat:r.lat,lng:r.lng}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){N()}),[]);var M=function(){var e=Object(x.a)(h.a.mark((function e(){var c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.id){e.next=12;break}if(!(null===i||void 0===i?void 0:i.id)){e.next=7;break}return e.next=4,(new Ot).update({lat:m.lat,lng:m.lng,addressMap:b,state:F,city:D},n.id,i.id);case 4:c=e.sent,e.next=10;break;case 7:return e.next=9,(new Ot).create({lat:m.lat,lng:m.lng,addressMap:b,state:F,city:D},n.id);case 9:c=e.sent;case 10:c.success&&c.address&&o(c.address),t&&t();case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d(t),e.next=3,Object(bt.geocodeByAddress)(t);case 3:return n=e.sent,P(n[0]),e.next=7,Object(bt.getLatLng)(n[0]);case 7:c=e.sent,g(c),_(c),L(c);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(e){for(var t=e.address_components,n=0;n<t.length;n++){if("locality"===t[n].types[0]){var c=t[n];console.log("locality",c.long_name),A(c.long_name)}if("administrative_area_level_1"===t[n].types[0]){var r=t[n];console.log("administrative_area_level_1",r.long_name),z(r.long_name)}}};return Object(c.jsx)(v.a,{children:Object(c.jsx)(xe.b,{initialValues:{street:"",area:"",city:"",state:""},onSubmit:M,children:function(e){var t=e.isSubmitting;return Object(c.jsxs)(xe.a,{children:[Object(c.jsx)(y.a,{aling:"center",justify:"center",py:10,children:Object(c.jsxs)(ue.c,{w:"100%",align:"flex-start",children:[Object(c.jsx)(w.a,{fontWeight:"bold",children:"Ingresa la direcci\xf3n completa de tu negocio"}),Object(c.jsx)(dt.a,{value:b,onChange:function(e){return d(e)},onSelect:R,searchOptions:{componentRestrictions:{country:["mx"]}},children:function(e){var t=e.getInputProps,n=e.suggestions,r=e.getSuggestionItemProps,a=e.loading;return Object(c.jsxs)(v.a,{w:"100%",children:[Object(c.jsx)(ye.a,Object(u.a)(Object(u.a)({},t()),{},{placeholder:"Direcci\xf3n ",size:"lg"})),Object(c.jsxs)(v.a,{shadow:"md",background:"#FFFFFF",children:[a&&Object(c.jsx)(at.a,{size:"xs",isIndeterminate:!0,colorScheme:"green"}),n.map((function(e){return Object(c.jsx)(v.a,Object(u.a)(Object(u.a)({},r(e,{key:e.id})),{},{textAlign:"left",p:2,children:Object(c.jsx)(w.a,{fontWeight:"bold",children:e.description})}))}))]})]})}})]})}),Object(c.jsxs)(v.a,{children:[Object(c.jsx)(v.a,{ref:E,h:"200px",w:"100%"}),Object(c.jsx)(w.a,{fontWeight:"bold",fontSize:"xs",mt:2,children:"Si es necesario, ajusta el mapa para que el pin aparezca en la ubicaci\xf3n correcta."})]}),Object(c.jsx)(y.a,{mt:4,align:"flex-end",justifyContent:"flex-end",children:Object(c.jsx)(S.a,{disabled:!b,isLoading:t,size:"lg",variant:"primary",type:"submit",children:"Siguiente"})})]})}})})},xt=function(e){e.setStep;var t=Object(r.useState)(null),n=Object(f.a)(t,2),a=n[0],s=n[1],i=Object(b.g)(),o=function(){var e=Object(x.a)(h.a.mark((function e(){var t,n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new Ue).get();case 2:t=e.sent,n=t.success,c=t.business,n&&s(c);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){o()}),[]),a?Object(c.jsxs)(v.a,{textAlign:"center",children:[Object(c.jsx)(he.a,{as:"h2",children:"\xbfCu\xe1l es la direcci\xf3n de tu negocio?"}),Object(c.jsx)(w.a,{fontSize:"xl",fontWeight:"500",children:"Ingresa la informaci\xf3n lo m\xe1s precisa posible para que tus clientes te puedan localizar."}),a&&Object(c.jsx)(ht,{handleSaveAddress:function(){i.push("/new-business/3")},business:a})]}):Object(c.jsx)(te,{})},ft=n(507),mt=n(71),gt=mt.b().shape({name:mt.c().min(5,"Demas\xedado corto, minimo 5 letras.").max(200,"Maximo 200 letras.").required("Ingresa un nombre"),price:mt.a().min(1).required("Ingresa el precio"),time:mt.c().required("Ingresa el tiempo")}),vt=function(e){Object(Ee.a)(e);var t=Object(r.useState)(null),n=Object(f.a)(t,2),a=n[0],s=n[1],i=Object(b.g)(),o=function(){var e=Object(x.a)(h.a.mark((function e(){var t,n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new Ue).get();case 2:t=e.sent,n=t.success,c=t.business,n&&s(c);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){o()}),[]);var l=function(){var e=Object(x.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=6;break}return e.next=3,(new Ue).createService(t,a.id);case 3:n=e.sent,n.success&&i.push("/new-business/4");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)(v.a,{textAlign:"center",children:[Object(c.jsx)(he.a,{as:"h2",children:"\xbfQu\xe9 servicios realizas?"}),Object(c.jsx)(w.a,{fontSize:"xl",fontWeight:"500",children:"A\xf1ade un servicio para empezar a utilizar Boombook"}),Object(c.jsx)(xe.b,{initialValues:{name:"",description:"",time:"",price:""},onSubmit:l,validationSchema:gt,children:function(e){var t=e.isSubmitting,n=e.values,r=e.handleChange,a=e.setFieldValue,s=e.errors;return Object(c.jsx)(xe.a,{children:Object(c.jsx)(y.a,{align:"center",w:"100%",justify:"center",mt:10,children:Object(c.jsxs)(ue.c,{w:{base:"100%",md:"70%"},spacing:3,children:[Object(c.jsx)(ze,{inputSize:"lg",name:"name",label:"Nombre del servicio"}),Object(c.jsx)(ze,{inputSize:"lg",name:"description",label:"Descripci\xf3n"}),Object(c.jsxs)(ue.a,{w:"100%",direction:"row",justify:"space-between",children:[Object(c.jsxs)(ge.a,{isInvalid:!!s.price,children:[Object(c.jsx)(ve.a,{fontWeight:"bold",fontSize:"sm",children:"Precio"}),Object(c.jsx)(ft.a,{name:"price",size:"lg",onChange:function(e){return a("price",e)},value:n.price,children:Object(c.jsx)(ft.b,{})}),s.price&&Object(c.jsx)(we.a,{children:s.price})]}),Object(c.jsxs)(ge.a,{isInvalid:!!s.time,children:[Object(c.jsx)(ve.a,{fontWeight:"bold",fontSize:"sm",children:"Tiempo"}),Object(c.jsxs)(Ke.a,{name:"time",size:"lg",placeholder:"Seleccione la duraci\xf3n",value:n.time,onChange:r,children:[Object(c.jsx)("option",{value:"15",children:"15 min."}),Object(c.jsx)("option",{value:"30",children:"30 min."}),Object(c.jsx)("option",{value:"45",children:"45 min."}),Object(c.jsx)("option",{value:"45",children:"45 min."}),Object(c.jsx)("option",{value:"60",children:"1:00 hr."}),Object(c.jsx)("option",{value:"75",children:"1:15 hr."}),Object(c.jsx)("option",{value:"90",children:"1:30 hr."}),Object(c.jsx)("option",{value:"105",children:"1:45 hr."}),Object(c.jsx)("option",{value:"120",children:"2:00 hr."}),Object(c.jsx)("option",{value:"135",children:"2:15 hr."}),Object(c.jsx)("option",{value:"140",children:"2:30 hr."})]}),Object(c.jsx)(we.a,{children:s.time})]})]}),Object(c.jsx)(S.a,{size:"lg",alignSelf:"flex-end",variant:"primary",type:"submit",isLoading:t,children:"Siguiente"})]})})})}})]})},yt=function(e){Object(Ee.a)(e);var t=Object(b.g)(),n=Object(r.useState)(null),a=Object(f.a)(n,2),s=a[0],i=a[1],o=function(){var e=Object(x.a)(h.a.mark((function e(){var t,n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new Ue).get();case 2:t=e.sent,n=t.success,c=t.business,n&&i(c);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){o()}),[]);var l=function(){var e=Object(x.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={isCompleted:!0,isPublic:!0},!s){e.next=6;break}return e.next=4,(new Ue).update(n,s.id);case 4:e.sent.success&&t.push("/");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(c.jsxs)(y.a,{align:"center",direction:"column",textAlign:"center",children:[Object(c.jsx)(Fe.a,{size:90,color:"#25CB67"}),Object(c.jsx)(he.a,{my:6,as:"h2",children:"Completado"}),Object(c.jsxs)(w.a,{fontSize:"xl",fontWeight:"500",mb:3,children:["Gracias por registrate en ",R,", toda la informaci\xf3n registrada anteriormente puede ser modificada desde la p\xe1gina de configuraci\xf3n."]}),Object(c.jsx)(w.a,{fontSize:"md",fontWeight:"500",children:"Te sugerimos ir al m\xf3dulo de configuraci\xf3n para que a\xf1adas m\xe1s servicios y publiques tu galer\xeda de fotos."}),Object(c.jsx)(S.a,{variant:"primary",size:"lg",mt:6,px:16,onClick:l,children:"Aceptar y publicar"})]})},wt=mt.b().shape({name:mt.c().min(5,"Demas\xedado corto, minimo 5 letras.").max(200,"Maximo 200 letras.").required("Ingresa un nombre"),phone:mt.c().required("Ingresa un tel\xe9fono."),businessCategoryId:mt.a().min(1,"Selecciona una categor\xeda").required("Selecciona una categor\xeda")}),St=function(e){Object(A.a)(n,e);var t=Object(T.a)(n);function n(){var e;return Object(D.a)(this,n),(e=t.call(this,"".concat(N,"/api/v1"))).getAll=function(){return e.instance.get("/categories")},e}return n}(_),Ct=function(e){var t=e.user,n=e.business,a=Object(b.g)(),s=Object(r.useState)([]),i=Object(f.a)(s,2),o=i[0],l=i[1];Object(r.useEffect)((function(){(function(){var e=Object(x.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new St).getAll();case 2:(t=e.sent).success&&l(t.categories);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var u=function(){var e=Object(x.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||!n.id){e.next=5;break}return e.next=3,(new Ue).update(t,n.id);case 3:e.next=7;break;case 5:return e.next=7,(new Ue).create(t);case 7:a.push("/new-business/2");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j={name:n?n.name:"",businessCategoryId:n?n.businessCategoryId:0,phone:n&&n.phone?n.phone:""};return Object(c.jsxs)(v.a,{textAlign:"center",children:[Object(c.jsxs)(he.a,{as:"h2",children:["Estamos contentos de que est\xe9s aqu\xed ",t.firstName,"."]}),Object(c.jsx)(w.a,{fontSize:"xl",fontWeight:"500",children:"Est\xe1s a un paso de comenzar a organizar tus clientes."}),Object(c.jsx)(xe.b,{initialValues:j,onSubmit:u,validationSchema:wt,children:function(e){var t=e.values,n=e.isSubmitting,r=e.handleChange,a=e.errors;return Object(c.jsx)(xe.a,{children:Object(c.jsx)(y.a,{aling:"center",justify:"center",py:10,w:"100%",direction:"column",justifyContent:"center",align:"center",children:Object(c.jsx)(v.a,{w:{base:"100%",md:"70%"},children:Object(c.jsxs)(ue.c,{spacing:5,align:"flex-start",children:[Object(c.jsx)(ze,{inputSize:"lg",name:"name",label:"\xbfCual es el nombre de tu negocio?"}),Object(c.jsxs)(ge.a,{isInvalid:!!a.businessCategoryId,children:[Object(c.jsx)(ve.a,{fontWeight:"bold",fontSize:"sm",children:"Categor\xeda"}),Object(c.jsxs)(Ke.a,{name:"businessCategoryId",size:"lg",value:t.businessCategoryId,onChange:r,children:[Object(c.jsx)("option",{value:"0",children:"Selecciona una categor\xeda"}),o.map((function(e){return Object(c.jsx)("option",{value:e.id,children:e.name},e.id)}))]}),a.businessCategoryId&&Object(c.jsx)(we.a,{children:a.businessCategoryId})]}),Object(c.jsx)(We,{inputSize:"lg",name:"description",label:"Descripci\xf3n del negocio (opcional)",rows:3}),Object(c.jsx)(ze,{inputSize:"lg",name:"phone",label:"Tel\xe9fono del negocio"}),Object(c.jsx)(v.a,{textAlign:"right",alignSelf:"flex-end",children:Object(c.jsx)(S.a,{variant:"primary",size:"lg",type:"submit",isLoading:n,children:"Siguiente"})})]})})})})}})]})},kt=function(){var e=Object(b.h)(),t=void 0!==e.step?Number(e.step):1,n=Object(r.useState)(t||1),a=Object(f.a)(n,2),s=a[0],i=a[1],o=Object(r.useState)(!0),l=Object(f.a)(o,2),u=l[0],j=l[1],d=Object(r.useState)(null),O=Object(f.a)(d,2),p=O[0],m=O[1],g=Object(r.useState)(null),y=Object(f.a)(g,2),w=y[0],S=y[1];Object(r.useEffect)((function(){var t=void 0!==e.step?Number(e.step):1;i(t)}),[t,e.step]),Object(r.useEffect)((function(){var e=function(){var e=Object(x.a)(h.a.mark((function e(){var t,n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new P).getMe();case 2:if(t=e.sent,n=t.success,(c=t.user)&&n){e.next=7;break}return e.abrupt("return");case 7:m(c);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(x.a)(h.a.mark((function e(){var t,n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new Ue).get();case 2:t=e.sent,n=t.success,c=t.business,n&&S(c);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),t(),j(!1)}),[]);var C=function(e){i(e)},k=function(){var e=Object(x.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new P).logout();case 2:window.location.href="/";case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(!p||u)return Object(c.jsx)(te,{});return Object(c.jsxs)(v.a,{bg:"#FFFFFF",height:"100vh",children:[w&&Object(c.jsx)(U,{user:p,business:w,logout:k}),Object(c.jsxs)(v.a,{mx:"auto",w:{base:"100%",md:"800px"},py:4,children:[Object(c.jsx)(v.a,{children:Object(c.jsx)(at.a,{value:16.66*s,colorScheme:"green"})}),Object(c.jsx)(v.a,{mt:6,px:{base:4,md:0},children:p&&!u&&function(){switch(s){case 1:return Object(c.jsx)(Ct,{business:w,user:p});case 2:return Object(c.jsx)(xt,{setStep:C});case 3:return Object(c.jsx)(vt,{});case 4:return Object(c.jsx)(jt,{});case 5:return Object(c.jsx)(ot,{});case 6:return Object(c.jsx)(yt,{});default:return Object(c.jsx)(he.a,{children:"No se pudo cargar la pagina"})}}()})]})]})},Ft=function(){var e=Object(r.useState)(null),t=Object(f.a)(e,2),n=t[0],a=t[1],s=Object(r.useContext)(Oe),i=Object(m.a)();Object(r.useEffect)((function(){(function(){var e=Object(x.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new Ot).get(s.id);case 2:t=e.sent,(n=t.address)&&a(n),console.log("Direccion",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var o=function(){var e=Object(x.a)(h.a.mark((function e(t){var c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s&&s.id&&(null===n||void 0===n?void 0:n.id))){e.next=7;break}return console.log("Id de negocio",s.id,t),e.next=4,(new Ot).update(t,s.id,n.id);case 4:c=e.sent,c.success&&i({title:"Datos actualizados.",status:"success",isClosable:!0,position:"top"});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(!n)return Object(c.jsx)(ct,{});var l={street:n.street?n.street:"",area:n.area?n.area:"",city:n.city?n.city:"",state:n.state?n.state:"",zipcode:n.zipcode?n.zipcode:""};return Object(c.jsx)(Le,{title:"Configuraci\xf3n",children:Object(c.jsxs)(tt,{children:[Object(c.jsx)(he.a,{as:"h2",size:"md",mb:2,children:"Direcci\xf3n"}),Object(c.jsx)(w.a,{fontSize:"md",fontWeight:"500",mb:8,pr:20,children:"Esta informaci\xf3n es utilizada  si la ubicaci\xf3n por coordenadas no es precisa, as\xed que es recomendable ingresarla."}),Object(c.jsx)(v.a,{w:"80%",children:Object(c.jsx)(xe.b,{initialValues:l,onSubmit:o,children:function(e){var t=e.isSubmitting;return Object(c.jsx)(xe.a,{children:Object(c.jsxs)(ue.c,{spacing:8,align:"flex-start",children:[Object(c.jsxs)(ue.a,{spacing:4,w:"100%",children:[Object(c.jsx)(ze,{inputSize:"lg",name:"street",label:"Calle y n\xfamero"}),Object(c.jsx)(ze,{inputSize:"lg",name:"area",label:"Colonia"})]}),Object(c.jsxs)(ue.a,{spacing:4,w:"100%",children:[Object(c.jsx)(ze,{inputSize:"lg",name:"city",label:"Municipio"}),Object(c.jsx)(ze,{inputSize:"lg",name:"state",label:"Estado"})]}),Object(c.jsx)(ue.a,{spacing:4,w:"49%",children:Object(c.jsx)(ze,{inputSize:"lg",name:"zipcode",label:"Codigo postal"})}),Object(c.jsx)(S.a,{variant:"primary",type:"submit",size:"lg",isLoading:t,children:"Guardar"})]})})}})})]})})},zt=function(){var e=Object(r.useContext)(Oe),t=Object(m.a)(),n=Object(r.useState)(null),a=Object(f.a)(n,2),s=a[0],i=a[1],o=Object(r.useState)(""),l=Object(f.a)(o,2),j=l[0],b=l[1],d=Object(r.useState)({lat:25.6866142,lng:-100.3161126}),O=Object(f.a)(d,2),p=O[0],g=O[1],C=Object(r.useState)(!0),k=Object(f.a)(C,2),F=(k[0],k[1]),z=pt({coords:p,setCoords:g}),W=z.refContainer,I=z.addMarker,D=z.changeLocation,A=function(){var t=Object(x.a)(h.a.mark((function t(){var n,c,r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(new Ot).get(e.id);case 2:n=t.sent,c=n.success,r=n.address,c&&r&&(i(r),b(r.addressMap),g({lat:r.lat,lng:r.lng}),D({lat:r.lat,lng:r.lng}),I({lat:r.lat,lng:r.lng})),F(!1);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){A()}),[]);var T=function(){var n=Object(x.a)(h.a.mark((function n(){return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.id||!(null===s||void 0===s?void 0:s.id)){n.next=5;break}return n.next=3,(new Ot).update({lat:p.lat,lng:p.lng,addressMap:j},e.id,s.id);case 3:n.sent.success&&t({title:"Datos actualizados.",status:"success",isClosable:!0,position:"top"});case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),E=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(t),e.next=3,Object(bt.geocodeByAddress)(t);case 3:return n=e.sent,e.next=6,Object(bt.getLatLng)(n[0]);case 6:c=e.sent,g(c),D(c),I(c);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsx)(Le,{title:"Configuraci\xf3n",children:Object(c.jsxs)(tt,{children:[Object(c.jsx)(he.a,{as:"h2",size:"md",mb:2,children:"Ubicaci\xf3n"}),Object(c.jsx)(w.a,{fontSize:"md",fontWeight:"500",mb:8,pr:{base:2,md:20},children:"Ingresa correctamente esta\x10 informaci\xf3n, es la que visualizar\xe1n las personas para poder llegar a tu negocio"}),Object(c.jsx)(v.a,{children:Object(c.jsx)(xe.b,{initialValues:{street:"",area:"",city:"",state:""},onSubmit:T,children:function(e){var t=e.isSubmitting;return Object(c.jsxs)(xe.a,{children:[Object(c.jsx)(y.a,{aling:"center",justify:"center",mb:2,children:Object(c.jsx)(ue.c,{w:"100%",align:"flex-start",children:Object(c.jsx)(dt.a,{value:j,onChange:function(e){return b(e)},onSelect:E,searchOptions:{componentRestrictions:{country:["mx"]}},children:function(e){var t=e.getInputProps,n=e.suggestions,r=e.getSuggestionItemProps,a=e.loading;return Object(c.jsxs)(v.a,{w:"100%",children:[Object(c.jsx)(ye.a,Object(u.a)(Object(u.a)({},t()),{},{placeholder:"Direcci\xf3n ",size:"lg"})),Object(c.jsxs)(v.a,{shadow:"md",background:"#FFFFFF",children:[a&&Object(c.jsx)(at.a,{size:"xs",isIndeterminate:!0,colorScheme:"green"}),n.map((function(e){return Object(c.jsx)(v.a,Object(u.a)(Object(u.a)({},r(e,{key:e.id})),{},{textAlign:"left",p:2,children:Object(c.jsx)(w.a,{fontWeight:"bold",children:e.description})}))}))]})]})}})})}),Object(c.jsxs)(v.a,{children:[Object(c.jsx)(v.a,{ref:W,h:"200px",w:"100%"}),Object(c.jsx)(w.a,{fontWeight:"bold",fontSize:"xs",mt:2,children:"Si es necesario, ajusta el mapa para que el pin aparezca en la ubicaci\xf3n correcta."})]}),Object(c.jsx)(y.a,{mt:4,align:"flex-start",justifyContent:"flex-start",children:Object(c.jsx)(S.a,{disabled:!j,isLoading:t,size:"lg",variant:"primary",type:"submit",children:"Guardar"})})]})}})})]})})},Wt=n(514),It=function(){Object(r.useContext)(Oe),Object(b.g)();var e=Object(m.a)(),t=Object(r.useState)(null),n=Object(f.a)(t,2),a=n[0],s=n[1],i=Object(r.useState)(!1),o=Object(f.a)(i,2),l=o[0],u=o[1],j=Object(r.useState)(!1),d=Object(f.a)(j,2),O=d[0],p=d[1],g=Object(r.useState)(!1),C=Object(f.a)(g,2),k=C[0],F=C[1],z=Object(r.useState)(!1),W=Object(f.a)(z,2),I=W[0],D=W[1];Object(r.useEffect)((function(){(function(){var e=Object(x.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new Ue).get();case 2:t=e.sent,n=t.business,console.log("Datos de negocio",n),n&&(s(n),u(n.hasBookingConfimation),p(n.hasParallelBookings),F(n.isPublic));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var A=function(){var t=Object(x.a)(h.a.mark((function t(){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(D(!0),!a||!a.id){t.next=7;break}return t.next=4,(new Ue).update({isPublic:k,hasBookingConfimation:l,hasParallelBookings:O},a.id);case 4:(n=t.sent).success&&e({title:"Datos actualizados.",status:"success",isClosable:!0,position:"top"}),console.log("Respuesta de ",n);case 7:D(!1);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return a?Object(c.jsx)(Le,{title:"Configuraci\xf3n",children:Object(c.jsxs)(tt,{children:[Object(c.jsx)(v.a,{children:Object(c.jsx)(he.a,{as:"h2",size:"md",mb:2,children:"Configuraciones avanzadas"})}),Object(c.jsx)(y.a,{w:"100%",mt:10,children:Object(c.jsxs)(ue.c,{align:"flex-start",direction:"row",divider:Object(c.jsx)(je.a,{}),spacing:6,children:[Object(c.jsxs)(y.a,{w:{base:"100%",md:"450px"},children:[Object(c.jsx)(w.a,{fontWeight:"500",children:"Permitir varias reservaciones a la misma hora"}),Object(c.jsx)(B.a,{}),Object(c.jsx)(Wt.a,{size:"md",isChecked:O,onChange:function(e){return p(!O)}})]}),Object(c.jsxs)(y.a,{w:{base:"100%",md:"450px"},children:[Object(c.jsx)(w.a,{fontWeight:"500",children:"Negocio p\xfablico"}),Object(c.jsx)(B.a,{}),Object(c.jsx)(Wt.a,{size:"md",isChecked:k,onChange:function(e){return F(!k)}})]}),Object(c.jsx)(S.a,{variant:"primary",size:"lg",onClick:A,isLoading:I,children:"Guardar"})]})})]})}):Object(c.jsx)(ct,{})},Dt=function(){var e=Object(r.useContext)(Oe),t=(Object(b.g)(),Object(m.a)()),n=Object(r.useState)([]),a=Object(f.a)(n,2),s=a[0],i=a[1],o=Object(r.useState)([]),l=Object(f.a)(o,2),u=l[0],j=l[1];Object(r.useEffect)((function(){(function(){var t=Object(x.a)(h.a.mark((function t(){var n,c;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(new Ue).getHours(e.id);case 2:(n=t.sent).success&&n.hours&&(c=He(n.hours),j(c));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()(),d()}),[]);var d=function(){var e,t,n=[];for(e=0;e<24;e++)for(t=0;t<2;t++)n.push(e+":"+(0===t?"00":30*t));i(n)},O=function(){var n=Object(x.a)(h.a.mark((function n(c){return h.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(null===e||void 0===e?void 0:e.id)){n.next=5;break}return n.next=3,(new Ue).createHours(c,e.id);case 3:n.sent.success&&t({title:"Datos actualizados.",status:"success",isClosable:!0,position:"top"});case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),p=function(e,t,n,r,a){var i=e.days[a].isOpen,o=e.days[a],l=o.openFrom,u=o.openTill;return Object(c.jsxs)(ue.a,{w:"100%",direction:"row",justify:"center",align:"center",children:[Object(c.jsx)(w.a,{fontSize:{base:"sm",md:"md"},w:"250px",textAlign:"left",fontWeight:"semibold",children:r}),Object(c.jsx)(ge.a,{children:Object(c.jsx)(Ke.a,{name:"days[".concat(a,"].openFrom"),size:"lg",value:l,onChange:t,children:s.map((function(e,t){return Object(c.jsx)("option",{value:e,children:e},t)}))})}),Object(c.jsx)(ge.a,{children:Object(c.jsx)(Ke.a,{name:"days[".concat(a,"].openTill"),size:"lg",value:u,onChange:t,children:s.map((function(e,t){return Object(c.jsx)("option",{value:e,children:e},t)}))})}),Object(c.jsx)(lt.a,{label:i?"Cerrar este d\xeda":"Abrir este d\xeda",fontSize:"md",children:Object(c.jsx)(G.a,{colorScheme:i?"blue":"red","aria-label":"Call Segun",size:"lg",icon:i?Object(c.jsx)(ut.b,{}):Object(c.jsx)(ut.a,{}),onClick:function(){return n("days[".concat(a,"].isOpen"),!i)}})})]})};if(!e||0===u.length)return Object(c.jsx)(ct,{});var g={days:[{businessId:e.id,openFrom:u[0]?u[0].openFrom:"9:00",openTill:u[0]?u[0].openTill:"20:00",isOpen:!u[0]||u[0].isOpen,dayOfWeek:0},{businessId:e.id,openFrom:u[1]?u[1].openFrom:"9:10",openTill:u[1]?u[1].openTill:"20:00",isOpen:!u[1]||u[1].isOpen,dayOfWeek:1},{businessId:e.id,openFrom:u[2]?u[2].openFrom:"9:00",openTill:u[2]?u[2].openTill:"20:00",isOpen:!u[2]||u[2].isOpen,dayOfWeek:2},{businessId:e.id,openFrom:u[3]?u[3].openFrom:"9:00",openTill:u[3]?u[3].openTill:"20:00",isOpen:!u[3]||u[3].isOpen,dayOfWeek:3},{businessId:e.id,openFrom:u[4]?u[4].openFrom:"9:00",openTill:u[4]?u[4].openTill:"20:00",isOpen:!u[4]||u[4].isOpen,dayOfWeek:4},{businessId:e.id,openFrom:u[5]?u[5].openFrom:"9:50",openTill:u[5]?u[5].openTill:"20:00",isOpen:!u[5]||u[5].isOpen,dayOfWeek:5},{businessId:e.id,openFrom:u[6]?u[6].openFrom:"9:00",openTill:u[6]?u[6].openTill:"20:00",isOpen:!u[6]||u[6].isOpen,dayOfWeek:6}]};return Object(c.jsx)(Le,{title:"Configuraci\xf3n",children:Object(c.jsxs)(tt,{children:[Object(c.jsx)(v.a,{children:Object(c.jsx)(he.a,{as:"h2",size:"md",mb:2,children:"Horario"})}),Object(c.jsx)(v.a,{children:Object(c.jsx)(xe.b,{initialValues:g,onSubmit:O,children:function(e){var t=e.isSubmitting,n=e.values,r=e.handleChange,a=e.setFieldValue;return Object(c.jsx)(xe.a,{children:Object(c.jsx)(y.a,{w:"100%",mt:10,children:Object(c.jsxs)(ue.c,{w:{base:"100%",md:"80%"},spacing:3,children:[p(n,r,a,"Domingo",0),p(n,r,a,"Lunes",1),p(n,r,a,"Martes",2),p(n,r,a,"Miercoles",3),p(n,r,a,"Jueves",4),p(n,r,a,"Viernes",5),p(n,r,a,"Sabado",6),Object(c.jsx)(S.a,{size:"lg",alignSelf:"flex-start",variant:"primary",type:"submit",isLoading:t,children:"Guardar"})]})})})}})})]})})},At=n(499),Tt=function(e){var t=e/60,n=t%1*60;return 0===n?"".concat(Math.trunc(t)," hrs"):t<1?"".concat(n," mins"):"".concat(Math.trunc(t),":").concat(n," hrs")},Et=function(e){Object(Ee.a)(e);var t=Object(r.useState)([]),n=Object(f.a)(t,2),a=n[0],s=n[1],i=Object(r.useState)(!0),o=Object(f.a)(i,2),l=o[0],u=o[1];if(Object(r.useEffect)((function(){(function(){var e=Object(x.a)(h.a.mark((function e(){var t,n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,(new Pe).getAll(t);case 3:n=e.sent,c=n.bookings,s(c),u(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),l)return Object(c.jsx)(ct,{});var j=function(e){switch(e){case 1:return"yellow.500";case 2:return"primary";case 3:return"red.500";default:return"primary"}};return Object(c.jsxs)(At.a,{variant:"simple",size:"md",children:[Object(c.jsx)(At.b,{children:"*C\xe1lculos basados en el tiempo y precio de cada servicio"}),Object(c.jsx)(At.f,{children:Object(c.jsxs)(At.g,{children:[Object(c.jsx)(At.e,{display:{base:"none",md:"table-cell"},children:"#"}),Object(c.jsx)(At.e,{children:"Cliente"}),Object(c.jsx)(At.e,{children:"Fecha de servicio"}),Object(c.jsx)(At.e,{display:{base:"none",md:"table-cell"},children:"Tiempo de servicio*"}),Object(c.jsx)(At.e,{display:{base:"none",md:"table-cell"},children:"Total a cobrar*"}),Object(c.jsx)(At.e,{display:{base:"none",md:"table-cell"},children:"Estatus"})]})}),Object(c.jsx)(At.c,{children:a.map((function(e){var t,n;return Object(c.jsxs)(At.g,{fontSize:"14px",children:[Object(c.jsx)(At.d,{display:{base:"none",md:"table-cell"},children:e.id}),Object(c.jsxs)(At.d,{children:[null===(t=e.customer)||void 0===t?void 0:t.firstName," ",null===(n=e.customer)||void 0===n?void 0:n.lastName]}),Object(c.jsx)(At.d,{children:e.bookingDate?ae(e.bookingDate):""}),Object(c.jsx)(At.d,{display:{base:"none",md:"table-cell"},children:e.totalTime?Tt(e.totalTime):""}),Object(c.jsxs)(At.d,{display:{base:"none",md:"table-cell"},children:["$",e.totalPrice,"MXN"]}),Object(c.jsx)(At.d,{display:{base:"none",md:"table-cell"},color:j(e.bookingStatus.id),children:e.bookingStatus.name})]})}))})]})},Lt=function(e){Object(Ee.a)(e);var t=Object(b.g)(),n=Object(r.useState)([]),a=Object(f.a)(n,2),s=a[0],i=a[1],o=Object(r.useState)(!0),l=Object(f.a)(o,2),u=l[0],j=l[1];return Object(r.useEffect)((function(){(function(){var e=Object(x.a)(h.a.mark((function e(){var t,n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={status:2,time:10,dateEnd:re()(new Date).toISOString()},e.next=3,(new Pe).getAll(t);case 3:n=e.sent,c=n.bookings,i(c),j(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),u?Object(c.jsx)(ct,{}):Object(c.jsxs)(At.a,{variant:"simple",size:"md",children:[Object(c.jsx)(At.f,{children:Object(c.jsxs)(At.g,{children:[Object(c.jsx)(At.e,{display:{base:"none",md:"table-cell"},children:"#"}),Object(c.jsx)(At.e,{children:"Cliente"}),Object(c.jsx)(At.e,{children:"Fecha de servicio"}),Object(c.jsx)(At.e,{display:{base:"none",md:"table-cell"},children:"Tiempo de servicio*"}),Object(c.jsx)(At.e,{display:{base:"none",md:"table-cell"},children:"Total a cobrar*"})]})}),Object(c.jsx)(At.c,{children:s.map((function(e){var n,r;return Object(c.jsxs)(At.g,{fontSize:"14px",children:[Object(c.jsx)(At.d,{display:{base:"none",md:"table-cell"},children:e.id}),Object(c.jsxs)(At.d,{textDecor:"underline",onClick:function(){return t.push("/bookings/".concat(e.id))},fontWeight:"600",_hover:{bg:"primaryLight",cursor:"pointer"},children:[null===(n=e.customer)||void 0===n?void 0:n.firstName," ",null===(r=e.customer)||void 0===r?void 0:r.lastName]}),Object(c.jsx)(At.d,{children:e.bookingDate?ae(e.bookingDate):""}),Object(c.jsx)(At.d,{display:{base:"none",md:"table-cell"},children:e.totalTime?Tt(e.totalTime):""}),Object(c.jsxs)(At.d,{display:{base:"none",md:"table-cell"},children:["$",e.totalPrice,"MXN"]})]})}))})]})},_t=function(e){Object(Ee.a)(e);var t=Object(m.a)(),n=Object(b.g)(),a=Object(r.useState)([]),s=Object(f.a)(a,2),i=s[0],o=s[1],l=Object(r.useState)(!0),u=Object(f.a)(l,2),j=u[0],d=u[1],O=Object(r.useState)(0),p=Object(f.a)(O,2),g=p[0],v=p[1];if(Object(r.useEffect)((function(){(function(){var e=Object(x.a)(h.a.mark((function e(){var t,n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={status:1,time:10},e.next=3,(new Pe).getAll(t);case 3:n=e.sent,c=n.bookings,o(c),d(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),j)return Object(c.jsx)(ct,{});var w=function(){var e=Object(x.a)(h.a.mark((function e(n,c){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Booking id",c),!c){e.next=8;break}return v(c),e.next=5,(new Pe).accepted(c);case 5:e.sent.success&&(o([].concat(Object(_e.a)(i.slice(0,n)),Object(_e.a)(i.slice(n+1)))),t({status:"success",title:"Servicio aceptado",position:"top"})),v(0);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(x.a)(h.a.mark((function e(n,c){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=7;break}return v(c),e.next=4,(new Pe).canceled(c);case 4:e.sent.success&&(o([].concat(Object(_e.a)(i.slice(0,n)),Object(_e.a)(i.slice(n+1)))),t({status:"error",title:"Servicio rechazado",position:"top"})),v(0);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(c.jsxs)(At.a,{variant:"simple",size:"md",children:[Object(c.jsx)(At.f,{children:Object(c.jsxs)(At.g,{children:[Object(c.jsx)(At.e,{display:{base:"none",md:"table-cell"},children:"#"}),Object(c.jsx)(At.e,{children:"Cliente"}),Object(c.jsx)(At.e,{children:"Fecha de servicio"}),Object(c.jsx)(At.e,{display:{base:"none",md:"table-cell"},children:"Tiempo de servicio*"}),Object(c.jsx)(At.e,{display:{base:"none",md:"table-cell"},children:"Total a cobrar*"}),Object(c.jsx)(At.e,{display:{base:"none",md:"table-cell"}})]})}),Object(c.jsx)(At.c,{children:i.map((function(e,t){var r,a;return Object(c.jsxs)(At.g,{fontSize:"14px",children:[Object(c.jsx)(At.d,{display:{base:"none",md:"table-cell"},children:e.id}),Object(c.jsxs)(At.d,{textDecor:"underline",onClick:function(){return n.push("/bookings/".concat(e.id))},fontWeight:"600",_hover:{bg:"primaryLight",cursor:"pointer"},children:[null===(r=e.customer)||void 0===r?void 0:r.firstName," ",null===(a=e.customer)||void 0===a?void 0:a.lastName]}),Object(c.jsx)(At.d,{children:e.bookingDate?ae(e.bookingDate):""}),Object(c.jsx)(At.d,{display:{base:"none",md:"table-cell"},children:e.totalTime?Tt(e.totalTime):""}),Object(c.jsxs)(At.d,{display:{base:"none",md:"table-cell"},children:["$",e.totalPrice,"MXN"]}),Object(c.jsx)(At.d,{display:{base:"none",md:"table-cell"},children:Object(c.jsxs)(y.a,{children:[Object(c.jsx)(lt.a,{label:"Aceptar",fontSize:"md",children:Object(c.jsx)(G.a,{"aria-label":"Aceptar",variant:"ghost",size:"lg",fontSize:"36px",icon:Object(c.jsx)(Fe.d,{}),mr:1,onClick:function(){return w(t,e.id)},isLoading:g===e.id})}),Object(c.jsx)(lt.a,{label:"Rechazar",fontSize:"md",children:Object(c.jsx)(G.a,{"aria-label":"Aceptar",variant:"ghost",size:"lg",fontSize:"36px",icon:Object(c.jsx)(Fe.e,{}),mr:1,onClick:function(){return S(t,e.id)},isLoading:g===e.id})})]})})]})}))})]})},Nt=function(e){var t=e.title,n=e.onClick,r=e.isActive;return Object(c.jsx)(S.a,{bg:r?"primary":"",variant:"ghost",fontWeight:"bold",pr:6,onClick:n,children:Object(c.jsx)(w.a,{color:r?"#FFF":"",fontSize:"md",children:t})})},Mt=function(e){Object(Ee.a)(e);var t=Object(r.useState)(1),n=Object(f.a)(t,2),a=n[0],s=n[1];return Object(c.jsx)(Le,{title:"Reservaciones",children:Object(c.jsx)(v.a,{bg:"surface",borderBottomWidth:1,borderColor:"borders",py:3,children:Object(c.jsxs)(v.a,{children:[Object(c.jsxs)(ue.a,{mt:4,borderBottomWidth:1,borderColor:"borders",p:3,children:[Object(c.jsx)(Nt,{title:"Pendientes",onClick:function(){return s(1)},isActive:1===a}),Object(c.jsx)(Nt,{title:"Pr\xf3ximas",onClick:function(){return s(2)},isActive:2===a}),Object(c.jsx)(Nt,{title:"Todas",onClick:function(){return s(3)},isActive:3===a})]}),1===a&&Object(c.jsx)(_t,{}),2===a&&Object(c.jsx)(Lt,{}),3===a&&Object(c.jsx)(Et,{})]})})})},Rt=function(e){Object(Ee.a)(e);var t=Object(b.h)().id,n=Object(m.a)(),a=Object(r.useState)(),s=Object(f.a)(a,2),i=s[0],o=s[1],l=Object(r.useState)(!0),u=Object(f.a)(l,2),j=u[0],d=u[1],O=function(){var e=Object(x.a)(h.a.mark((function e(){var n,c,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new Pe).get(t);case 2:n=e.sent,c=n.success,r=n.booking,c&&o(r),d(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){O()}),[]);var p=function(){var e=Object(x.a)(h.a.mark((function e(){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return d(!0),e.next=4,(new Pe).accepted(t);case 4:(n=e.sent).success&&O(),d(!1),console.log("respues de reservacion",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(x.a)(h.a.mark((function e(){var c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=9;break}return d(!0),e.next=4,(new Pe).canceled(t);case 4:(c=e.sent).success&&O(),console.log("Respuesta de servicio",c),d(!1),n({status:"error",title:"Servicio rechazado",position:"top"});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(j)return Object(c.jsx)(ct,{});if(!i)return Object(c.jsx)(w.a,{children:"Servicio no encontrado"});return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(v.a,{bg:function(e){switch(e){case 1:return"#D69E2E";case 2:return"primary";case 3:return"error"}}(i.bookingStatusId),color:"#FFF",py:6,px:{base:6,md:12},borderBottomWidth:1,borderColor:"borders",children:Object(c.jsxs)(ue.c,{align:"left",justify:"flex-start",children:[Object(c.jsxs)(he.a,{as:"h1",children:[i.customer.firstName," ",i.customer.lastName]}),Object(c.jsxs)(w.a,{color:"#FFF",children:["Tel\xe9fono: ",i.customer.phone]}),Object(c.jsxs)(w.a,{color:"#FFF",children:["Fecha de solicitud: ",se(i.createdAt)]})]})}),Object(c.jsx)(Le,{children:Object(c.jsxs)(y.a,{flexDirection:{base:"column",md:"row"},justify:"space-between",children:[Object(c.jsxs)(y.a,{direction:"column",w:{base:"100%",md:"62%"},children:[Object(c.jsxs)(v.a,{bg:"surface",py:6,px:6,borderWidth:1,borderColor:"borders",mb:6,children:[Object(c.jsx)(he.a,{as:"h4",fontSize:"2xl",mb:6,children:"Resumen del servicio"}),i.message&&Object(c.jsxs)(ue.c,{textAlign:"left",align:"flex-start",justify:"flex-start",spacing:1,mb:4,children:[Object(c.jsx)(w.a,{fontSize:"sm",fontWeight:"600",color:"subtext",children:"Comentario"}),Object(c.jsx)(w.a,{as:"cite",children:i.message})]}),Object(c.jsx)(ue.a,{children:Object(c.jsxs)(ue.c,{textAlign:"left",align:"flex-start",justify:"flex-start",spacing:1,mb:4,children:[Object(c.jsx)(w.a,{fontSize:"sm",fontWeight:"600",color:"subtext",children:"Fecha de servicio"}),Object(c.jsx)(w.a,{fontWeight:"600",children:se(i.bookingDate)})]})}),Object(c.jsxs)(ue.a,{spacing:10,children:[Object(c.jsxs)(ue.c,{textAlign:"left",align:"flex-start",justify:"flex-start",spacing:1,mb:4,children:[Object(c.jsx)(w.a,{fontSize:"sm",fontWeight:"600",color:"subtext",children:"Tiempo de servicio"}),Object(c.jsx)(w.a,{fontWeight:"600",children:Tt(i.totalTime)})]}),Object(c.jsxs)(ue.c,{textAlign:"left",align:"flex-start",justify:"flex-start",spacing:1,mb:4,children:[Object(c.jsx)(w.a,{fontSize:"sm",fontWeight:"600",color:"subtext",children:"Total a cobrar"}),Object(c.jsxs)(w.a,{fontWeight:"600",children:["$",i.totalPrice,"MXN"]})]})]})]}),Object(c.jsxs)(v.a,{bg:"surface",py:6,px:6,w:"100%",borderWidth:1,borderColor:"borders",children:[Object(c.jsx)(he.a,{as:"h4",fontSize:"2xl",mb:6,children:"Servicios"}),Object(c.jsx)(ue.b,{mb:3,w:"100%",children:i.bookingService.map((function(e){return Object(c.jsxs)(y.a,{align:"center",justify:"space-evenly",flex:"100%",children:[Object(c.jsx)(w.a,{fontSize:"md",fontWeight:"semibold",w:"260px",children:e.nameService}),Object(c.jsx)(B.a,{}),Object(c.jsxs)(y.a,{alignSelf:"center",children:[Object(c.jsx)(v.a,{w:"15px"}),Object(c.jsxs)(y.a,{direction:"column",children:[Object(c.jsxs)(w.a,{fontSize:"xs",pr:"10px",children:["$",e.priceService,"MXN"]}),Object(c.jsxs)(w.a,{fontSize:"xs",pr:"10px",children:[e.timeService,"min"]})]})]})]})}))})]})]}),Object(c.jsx)(v.a,{w:{base:"100%",md:"35%"},children:1===i.bookingStatusId&&Object(c.jsx)(v.a,{bg:"surface",py:6,px:6,borderWidth:1,borderColor:"borders",children:Object(c.jsxs)(y.a,{justifyContent:"center",direction:"column",alignItems:"center",children:[Object(c.jsx)(he.a,{as:"h4",fontSize:"2xl",children:"Solicitud"}),Object(c.jsx)(w.a,{mt:10,textAlign:"center",children:"Oscar Alberto esta interesado en hacer una reservaci\xf3n. \xbfLo aceptas?"}),Object(c.jsxs)(ue.c,{my:6,w:"100%",children:[Object(c.jsx)(S.a,{variant:"primary",isFullWidth:!0,size:"lg",onClick:p,children:"Aceptar"}),Object(c.jsx)(S.a,{variant:"outline",colorScheme:"red",isFullWidth:!0,size:"lg",onClick:g,children:"Rechazar"})]})]})})})]})})]})},Pt=n(500),Bt=n(276),qt=function(e){Object(Ee.a)(e);var t=Object(r.useState)([]),n=Object(f.a)(t,2),a=n[0],s=n[1],i=Object(r.useState)(!1),o=Object(f.a)(i,2),l=o[0],u=o[1],j=Object(r.useState)(!0),b=Object(f.a)(j,2),d=b[0],O=b[1],p=function(){var e=Object(x.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new Ue).getPhotos();case 2:(t=e.sent).success&&(n=t.photos.map((function(e){return{image:e.file,id:e.id}})),s(n)),O(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){p()}),[]);var m=function(){var e=Object(x.a)(h.a.mark((function e(t){var n,c,r,i,o,l;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(!0),O(!0),n=t.target.files,c=Array.from(n).map((function(e){return{image:URL.createObjectURL(e),id:e.id}})),r=[].concat(Object(_e.a)(a),Object(_e.a)(c)),s(r),i=0;case 7:if(!(i<n.length)){e.next=17;break}return(o=new FormData).append("file",n[i]),e.next=12,(new Ue).uplaodGallery(o);case 12:l=e.sent,console.log("Respuesta imagenes",l);case 14:i++,e.next=7;break;case 17:u(!1),O(!1);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(x.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O(!0),!t){e.next=6;break}return e.next=4,(new Ue).deletePhoto(t);case 4:e.sent.success&&s([].concat(Object(_e.a)(a.splice(0,n)),Object(_e.a)(a.splice(n+1))));case 6:O(!1);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return d?Object(c.jsx)(ct,{}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)(v.a,{w:"60%",children:[Object(c.jsx)(w.a,{fontWeight:"bold",mb:4,children:"Galeria"}),Object(c.jsx)(w.a,{fontSize:"sm",color:"subtext",mb:3,children:"A\xf1ade las fotos de tu negocio y local para que los usuarios conozcan tus servicios."}),Object(c.jsx)(S.a,{variant:"primary-outline",isLoading:l,p:0,mt:4,children:Object(c.jsx)(ve.a,{w:"100%",h:"100%",htmlFor:"files",m:0,p:2,px:4,children:"A\xf1adir imagenes +"})}),Object(c.jsx)("input",{type:"file",id:"files",name:"files",accept:"image/x-png, image/png, image/jpg, image/jpeg",multiple:!0,onChange:m,style:{display:"none"}})]}),Object(c.jsx)(v.a,{w:"90%",children:Object(c.jsx)(Pt.a,{direction:"row",flex:1,mt:4,children:a.map((function(e,t){return Object(c.jsxs)(v.a,{p:2,pos:"relative",role:"group",children:[Object(c.jsx)(y.a,{pos:"absolute",w:"200px",alignItems:"flex-end",justifyContent:"flex-end",p:2,display:"none",_groupHover:{display:"flex"},children:Object(c.jsx)(G.a,{size:"sm","aria-label":"Delete photo",icon:Object(c.jsx)(Bt.a,{size:20}),onClick:function(){return g(e.id,t)}})}),Object(c.jsx)(st.a,{w:"200px",h:"133px",objectFit:"cover",src:e.image})]},t)}))})})]})},Ht=function(){return Object(c.jsx)(Le,{title:"Configuraci\xf3n",children:Object(c.jsxs)(tt,{children:[Object(c.jsx)(he.a,{as:"h2",size:"md",mb:2,children:"Fotos"}),Object(c.jsx)(y.a,{flexDirection:{base:"column",md:"row"},w:"90%",justify:"space-between",mt:4,children:Object(c.jsx)(it,{})}),Object(c.jsx)(je.a,{my:6}),Object(c.jsx)(y.a,{w:"100%",justify:"space-between",direction:"column",children:Object(c.jsx)(qt,{})})]})})},Gt=n(501),Vt=function(e){var t=e.isOpen,n=e.onClose,s=e.service,i=e.realodList,o=Object(r.useContext)(Oe),l=Object(m.a)(),u=function(){var e=Object(x.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===s||void 0===s?void 0:s.id)){e.next=7;break}return e.next=3,(new Ue).deleteService(s.id,o.id);case 3:t=e.sent,t.success&&(i(),l({title:"Datos actualizados.",status:"success",isClosable:!0,position:"top"})),n();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=a.a.useRef();return Object(c.jsx)(Gt.a,{isOpen:t,leastDestructiveRef:j,onClose:n,children:Object(c.jsx)(X.h,{children:Object(c.jsxs)(Gt.b,{children:[Object(c.jsx)(X.g,{fontSize:"lg",fontWeight:"bold",children:"Eliminar servicio"}),Object(c.jsxs)(X.b,{children:[Object(c.jsx)(w.a,{mb:2,fontWeight:"bold",fontSize:"sm",children:"\xbfEst\xe1s seguro que quieres eliminar este servicio?"}),Object(c.jsx)(w.a,{fontSize:"sm",children:"No es posible deshacer la operaci\xf3n."})]}),Object(c.jsxs)(X.f,{children:[Object(c.jsx)(S.a,{ref:j,onClick:n,children:"Cancelar"}),Object(c.jsx)(S.a,{colorScheme:"red",onClick:u,ml:3,children:"Si, eliminar"})]})]})})})},Ut=function(e){var t=e.realodList,n=e.service,a=Object(r.useContext)(Oe),s=function(){var e=Object(x.a)(h.a.mark((function e(c){var r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===n||void 0===n?void 0:n.id)){e.next=6;break}return e.next=3,(new Ue).updateService(c,n.id,a.id);case 3:r=e.sent,e.next=9;break;case 6:return e.next=8,(new Ue).createService(c,a.id);case 8:r=e.sent;case 9:console.log("respuesta",r),r.success&&t&&t();case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i=n||{name:"",description:"",price:"",time:""};return Object(c.jsx)(v.a,{children:Object(c.jsx)(xe.b,{initialValues:i,onSubmit:s,validationSchema:gt,children:function(e){var t=e.isSubmitting,n=e.values,r=e.handleChange,a=e.setFieldValue,s=e.errors;return Object(c.jsx)(xe.a,{children:Object(c.jsxs)(ue.c,{spacing:4,children:[Object(c.jsx)(ze,{name:"name",label:"Nombre"}),Object(c.jsx)(We,{name:"description",label:"Descripci\xf3n (opcional)"}),Object(c.jsxs)(ue.a,{children:[Object(c.jsxs)(ge.a,{isInvalid:!!s.price,children:[Object(c.jsx)(ve.a,{fontWeight:"bold",fontSize:"sm",children:"Precio"}),Object(c.jsx)(ft.a,{name:"price",size:"lg",onChange:function(e){return a("price",e)},value:n.price,children:Object(c.jsx)(ft.b,{})}),s.price&&Object(c.jsx)(we.a,{children:s.price})]}),Object(c.jsxs)(ge.a,{isInvalid:!!s.time,children:[Object(c.jsx)(ve.a,{fontWeight:"bold",fontSize:"sm",children:"Tiempo"}),Object(c.jsxs)(Ke.a,{name:"time",size:"lg",placeholder:"Seleccion\xe9 una duraci\xf3n",value:n.time,onChange:r,children:[Object(c.jsx)("option",{value:"15",children:"15 min."}),Object(c.jsx)("option",{value:"30",children:"30 min."}),Object(c.jsx)("option",{value:"45",children:"45 min."}),Object(c.jsx)("option",{value:"45",children:"45 min."}),Object(c.jsx)("option",{value:"60",children:"1:00 hr."}),Object(c.jsx)("option",{value:"75",children:"1:15 hr."}),Object(c.jsx)("option",{value:"90",children:"1:30 hr."}),Object(c.jsx)("option",{value:"105",children:"1:45 hr."}),Object(c.jsx)("option",{value:"120",children:"2:00 hr."})]}),s.price&&Object(c.jsx)(we.a,{children:s.price})]})]}),Object(c.jsx)(S.a,{type:"submit",isLoading:t,variant:"primary",alignSelf:"end",children:"Guardar"})]})})}})})},Yt=function(e){var t=e.isOpen,n=e.onClose,r=e.realodList,a=e.service;return Object(c.jsxs)(X.a,{isOpen:t,onClose:n,motionPreset:"slideInBottom",children:[Object(c.jsx)(X.h,{}),Object(c.jsxs)(X.d,{children:[Object(c.jsx)(X.g,{children:"Nuevo servicio"}),Object(c.jsx)(X.c,{}),Object(c.jsx)(X.b,{children:Object(c.jsx)(Ut,{realodList:r,service:a})})]})]})},$t=function(e){var t=e.service,n=e.handleEditService,r=e.handleDeleteService;return Object(c.jsxs)(y.a,{shadow:"md",bg:"surface",px:4,py:4,borderBottomWidth:1,borderBottomColor:"borders",align:"center",children:[Object(c.jsxs)(v.a,{w:"50%",children:[Object(c.jsx)(w.a,{size:"xs",fontWeight:"bold",children:t.name}),Object(c.jsx)(w.a,{fontSize:"xs",display:{base:"none",md:"block"},children:t.description})]}),Object(c.jsxs)(w.a,{size:"sm",fontWeight:"semibold",w:"25%",textAlign:"left",children:[t.time," min."]}),Object(c.jsxs)(w.a,{size:"sm",fontWeight:"semibold",w:"25%",textAlign:"left",children:["$",t.price]}),Object(c.jsx)(v.a,{children:Object(c.jsxs)(H.a,{children:[Object(c.jsx)(H.b,{as:G.a,icon:Object(c.jsx)(Y.d,{})}),Object(c.jsxs)(H.d,{children:[Object(c.jsx)(H.c,{onClick:function(){return n(t)},children:"Editar"}),Object(c.jsx)(H.c,{onClick:function(){return r(t)},children:"Eliminar"})]})]})})]})},Zt=function(e){var t=e.services,n=e.handleEditService,r=e.handleDeleteService;return Object(c.jsx)(v.a,{shadow:"sm",children:t.map((function(e){return Object(c.jsx)($t,{service:e,handleEditService:n,handleDeleteService:r},e.id)}))})},Jt=function(e){Object(Ee.a)(e);var t=Object(g.a)(),n=t.onOpen,a=t.isOpen,s=t.onClose,i=Object(r.useContext)(Oe),o=Object(r.useState)([]),l=Object(f.a)(o,2),u=l[0],j=l[1],b=Object(r.useState)(),d=Object(f.a)(b,2),O=d[0],p=d[1],m=Object(r.useState)(!0),C=Object(f.a)(m,2),k=C[0],F=C[1],z=Object(r.useState)(!1),W=Object(f.a)(z,2),I=W[0],D=W[1],A=function(){var e=Object(x.a)(h.a.mark((function e(){var t,n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new Ue).getServices(i.id);case 2:t=e.sent,n=t.success,c=t.services,n&&c&&j(c),F(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){A()}),[]);var T=function(){A(),s()};return k?Object(c.jsx)(ct,{}):Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(Yt,{isOpen:a,onClose:s,realodList:T,service:O}),O&&Object(c.jsx)(Vt,{isOpen:I,realodList:T,service:O,onClose:function(){return D(!I)}}),Object(c.jsxs)(Le,{title:"Servicios",children:[Object(c.jsxs)(y.a,{direction:{base:"column",md:"row"},align:"center",children:[Object(c.jsx)(v.a,{children:Object(c.jsx)(w.a,{fontSize:"md",fontWeight:"500",mb:8,pr:{base:3,md:20},children:"A\xf1ade tantos servicios necesites para que tus clientes conozcan todo lo que ofreces."})}),Object(c.jsx)(B.a,{}),Object(c.jsx)(v.a,{alignSelf:{base:"end",md:"center"},mb:3,children:Object(c.jsx)(S.a,{variant:"primary",onClick:function(){p(void 0),n()},children:"Nuevo servicio"})})]}),Object(c.jsx)(v.a,{fontSize:{base:"xs",md:"md"},children:Object(c.jsx)(Zt,{services:u,handleEditService:function(e){p(e),n()},handleDeleteService:function(e){p(e),D(!0)}})})]})]})},Xt=function(e){Object(A.a)(n,e);var t=Object(T.a)(n);function n(){var e;return Object(D.a)(this,n),(e=t.call(this,M)).getAll=function(){return e.instance.get("/customers")},e}return n}(_),Qt=function(e){var t=e.customers;return Object(c.jsxs)(At.a,{variant:"simple",children:[Object(c.jsx)(At.b,{children:"Imperial to metric conversion factors"}),Object(c.jsx)(At.f,{children:Object(c.jsxs)(At.g,{children:[Object(c.jsx)(At.e,{children:"Nombre"}),Object(c.jsx)(At.e,{children:"Telefono"}),Object(c.jsx)(At.e,{children:"Ultima solicitud"})]})}),Object(c.jsx)(At.c,{children:t.map((function(e,t){return Object(c.jsxs)(At.g,{children:[Object(c.jsxs)(At.d,{children:[e.firstName," ",e.lastName]}),Object(c.jsx)(At.d,{children:e.phone}),Object(c.jsx)(At.d,{children:ae(e.bookingCreatedAt)})]},t)}))})]})},Kt=function(e){Object(Ee.a)(e);var t=Object(r.useState)([]),n=Object(f.a)(t,2),a=n[0],s=n[1],i=Object(r.useState)(!0),o=Object(f.a)(i,2),l=o[0],u=o[1],j=function(){var e=Object(x.a)(h.a.mark((function e(){var t,n,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(new Xt).getAll();case 2:t=e.sent,n=t.success,c=t.customers,console.log("Clientes",c),n&&c&&s(c),u(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){j()}),[]),l?Object(c.jsx)(ct,{}):Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)(Le,{title:"Clientes (".concat(a.length,")"),children:[Object(c.jsx)(y.a,{direction:"row",align:"center",children:Object(c.jsx)(B.a,{})}),Object(c.jsx)(v.a,{bg:"surface",borderBottomWidth:1,borderColor:"borders",py:3,children:Object(c.jsx)(Qt,{customers:a})})]})})},en=function(){var e=function(){return!!O.get("qid")?Object(c.jsx)(b.b,{exact:!0,path:"/:path?/:path2?",children:Object(c.jsxs)(pe,{children:[Object(c.jsx)(b.b,{path:"/",exact:!0,component:Je}),Object(c.jsx)(b.b,{path:"/bookings",exact:!0,component:Mt}),Object(c.jsx)(b.b,{path:"/bookings/:id",exact:!0,component:Rt}),Object(c.jsx)(b.b,{path:"/services",exact:!0,component:Jt}),Object(c.jsx)(b.b,{path:"/settings",exact:!0,component:rt}),Object(c.jsx)(b.b,{path:"/customers",exact:!0,component:Kt}),Object(c.jsx)(b.b,{path:"/settings/address",exact:!0,component:Ft}),Object(c.jsx)(b.b,{path:"/settings/location",exact:!0,component:zt}),Object(c.jsx)(b.b,{path:"/settings/hours",exact:!0,component:Dt}),Object(c.jsx)(b.b,{path:"/settings/photos",exact:!0,component:Ht}),Object(c.jsx)(b.b,{path:"/settings/advanced",exact:!0,component:It})]})}):Object(c.jsx)(b.b,{render:function(){return Object(c.jsx)(b.a,{to:{pathname:"/signup"}})}})},t=function(e){var t=e.component,n=Object(j.a)(e,["component"]),r=!!O.get("qid");return Object(c.jsx)(b.b,Object(u.a)(Object(u.a)({},n),{},{render:function(e){return r?Object(c.jsx)(t,Object(u.a)({},e)):Object(c.jsx)(b.a,{to:{pathname:"/login"}})}}))},n=function(e){var t=e.component,n=Object(j.a)(e,["component"]),r=!!O.get("qid");return Object(c.jsx)(b.b,Object(u.a)(Object(u.a)({},n),{},{render:function(e){return r?Object(c.jsx)(b.a,{to:{pathname:"/"}}):Object(c.jsx)(t,Object(u.a)({},e))}}))};return Object(c.jsx)(d.a,{basename:"/manager/",children:Object(c.jsxs)(b.d,{children:[Object(c.jsx)(n,{path:"/login",exact:!0,component:Te}),Object(c.jsx)(n,{path:"/signup",exact:!0,component:Qe}),Object(c.jsx)(t,{path:"/new-business/:step?",exact:!0,component:kt}),Object(c.jsx)(e,{})]})})},tn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,515)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))},nn=n(118),cn=n(502),rn=Object(u.a)(Object(u.a)({},nn.b.fonts),{},{mono:"'Menlo', monospace"}),an=Object(cn.a)(Object(u.a)(Object(u.a)({},nn.b),{},{styles:{global:{body:{bg:"#F6F7F9",color:"#020621"}}},colors:Object(u.a)(Object(u.a)({},nn.b.colors),{},{black:"#16161D",primary:"#25CB67",_primary:"#05AF3C",secondary:"#020621",_secondary:"#161e2c",error:"#B00020",background:"#F6F7F9",surface:"#FFFFFF",borders:"#d9e3eb",subtext:"#717171",primaryLight:"#E9F9EF"}),fonts:rn,components:{Link:{variants:{primary:{fontWeight:"semibold",_hover:{textDecoration:"none",color:"primary"}}}},Button:{variants:{primary:{bg:"primary",borderColor:"#05AF3C",color:"#FFF",_hover:{bg:"_primary"}},"primary-outline":{bg:"transparent",borderColor:"primary",borderWidth:1,color:"primary",_hover:{bg:"_primary",color:"#FFFFFF"}},secondary:{bg:"secondary",borderColor:"#05AF3C",color:"#FFF",_hover:{bg:"_secondary"}}}},Input:{baseStyle:{field:{_focus:{borderColor:"_primary",borderWidth:1,outline:0,boxShadow:"none"},boxShadow:"none"}},variants:{outline:function(){return{field:{_focus:{borderColor:"_primary",borderWidth:1,outline:0,boxShadow:"none"},_hover:{borderColor:"_primary",borderWidth:1}}}},app:{field:{_focus:{borderColor:"_primary",borderWidth:1,outline:0}}}}}}}));i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsxs)(o.a,{theme:an,children:[Object(c.jsx)(l.a,{}),Object(c.jsx)(en,{})]})}),document.getElementById("root")),tn()}},[[459,1,2]]]);
//# sourceMappingURL=main.92b29470.chunk.js.map